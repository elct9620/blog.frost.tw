<!doctype html><html lang=en><head><title>TGONext: Tracing and Technical Debt - Aotokitsuruya is learning</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=description content="We have 4 ~ 5 times meetup in TGONext, and this time is the last meetup in the schedule. In the possible last meetup, we discuss some topic which we are not planning to …"><meta name=created content="2020-05-11T00:00:00+0000"><meta name=modified content="2020-05-11T00:19:35+0800"><meta name=author content="蒼時弦也"><meta property="og:site_name" content="Aotokitsuruya is learning"><meta property="og:title" content="TGONext: Tracing and Technical Debt"><meta property="og:url" content="https://blog.frost.tw/en/posts/2020/05/11/TGONext-Tracing-and-Technical-Debt/"><meta property="og:type" content="article"><meta property="og:image" content="https://blog.frost.tw/images/2020-05-11-tgonext-tracing-and-technical-debt/thumbnail.jpg"><meta name=theme-color content="#EFEFEF"><link href=https://blog.frost.tw/icon-512.png rel=icon><link rel=canonical href=https://blog.frost.tw/en/posts/2020/05/11/TGONext-Tracing-and-Technical-Debt/><link rel=alternate hreflang=zh-tw href=https://blog.frost.tw/posts/2020/05/11/TGONext-Tracing-and-Technical-Debt/><script type=application/ld+json>[{"@context":"https://schema.org","@type":"WebPage","headline":"TGONext: Tracing and Technical Debt","datePublished":"2020-05-11T00:19:35+08:00","dateModified":"2020-05-11T00:19:35+08:00","url":"https://blog.frost.tw/en/posts/2020/05/11/TGONext-Tracing-and-Technical-Debt/","description":"We have 4 ~ 5 times meetup in TGONext, and this time is the last meetup in the schedule. In the possible last meetup, we discuss some topic which we are not planning to …\n","keywords":["Experiance","TGONext","Architecture"],"image":"https://blog.frost.tw/images/2020-05-11-tgonext-tracing-and-technical-debt/thumbnail.jpg","author":{"@type":"Person","name":"蒼時弦也"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.frost.tw/"},"publisher":{"@type":"Organization","name":"Aotokitsuruya is learning","url":"https://blog.frost.tw/"}},{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://blog.frost.tw/","name":"Aotokitsuruya is learning","image":"http://blog.frost.tw/icon-512.png"}},{"@type":"ListItem","position":2,"item":{"@id":"https://blog.frost.tw/en/posts/2020/05/11/TGONext-Tracing-and-Technical-Debt/","name":"TGONext: Tracing and Technical Debt","image":"https://blog.frost.tw/images/2020-05-11-tgonext-tracing-and-technical-debt/thumbnail.jpg"}}]}]</script><script async src=/js/turbolinks.min.js></script></head><body><div id=fb-root data-turbolinks-permanent></div><h1 id=sitename><a href=/en class="hide-text logo--icon align-center">Aotokitsuruya is learning</a></h1><aside id=slogan class="slogan align-center text-center"><h2 class=slogan__title>Aotokitsuruya</h2><p class=slogan__description>The Web is attracting me, so I start learning PHP, HTML, CSS and JavaScript. When I know about Ruby, I fall in love with it. Now, I working with my friend to design games using C++ and still learning web about Golang, Ruby and JavaScript. In the other side, I also be a designer, the reason why the web is attracted me.</p></aside><div id=wrapper><article class="post article" role=article><header class=article__header><time datetime=2020-05-11T00:19:35+0800 class=article__time--header>May.11</time><h1 class=article__title>TGONext: Tracing and Technical Debt</h1></header><div class=article__entry><nav class=translation><a class=translation__link href=https://blog.frost.tw/posts/2020/05/11/TGONext-Tracing-and-Technical-Debt/>繁體中文</a></nav><aside class=article__toc><header class=article__toc-title><h3>Table of Contents</h3></header><nav class=article__toc-list role=list><nav id=TableOfContents><ul><li><a href=#log-tracing>Log Tracing</a><ul><li><a href=#collection>Collection</a></li><li><a href=#open-tracing>Open Tracing</a></li><li><a href=#application-performance-monitor>Application Performance Monitor</a></li><li><a href=#time>Time</a></li><li><a href=#dashboard>Dashboard</a></li></ul></li><li><a href=#technical-debt>Technical Debt</a><ul><li><a href=#the-test>The Test</a></li><li><a href=#the-known-and-unknown-debt>The known and unknown debt</a></li><li><a href=#the-communicate>The communicate</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></nav><hr></aside><p>We have 4 ~ 5 times meetup in TGONext, and this time is the last meetup in the schedule. In the possible last meetup, we discuss some topic which we are not planning to discuss at first.</p><p>This time we are talking about log tracing and how to deal with technical debt.</p><h2 id=log-tracing>Log Tracing</h2><p>Some of the mentees have some questions about the log collection in their work.</p><h3 id=collection>Collection</h3><p>In the common cases is choose to put our logs in the local disk but when the services are growing, this is hard to debug from the logs.</p><p>In my company, we usually put the logs on the local disk because our customers usually have only one server. Or we will let our customers use SaaS to upload to third-party services to save the time to build a logging server. We already have a lot of useful tools that can be chosen, for example, the AWS CloudWatch or <a href=https://www.papertrail.com/>Papertrail</a> is easier to integrate to Rails.</p><h3 id=open-tracing>Open Tracing</h3><p>When the amount of service is growing, the logging is not enough to trace a whole system and we need more information to know about our system.</p><p>Open Tracing is a standard to define how to trace our service. We can use <a href=https://www.jaegertracing.io/>Jagger</a> or <a href=https://zipkin.io/>Zipkin</a> which are support the Open Tracing API.</p><blockquote><p>Choose Open Tracing may be a good idea, the most business solution are support Open Tracing API that we can easily switch between them.</p></blockquote><h3 id=application-performance-monitor>Application Performance Monitor</h3><p>This is a part of the Open Tracing, it gives us to trace a function call or API call spend time. In my experience, the business solution like <a href=https://www.datadoghq.com/>Datadog</a>, <a href=https://newrelic.com/>NewRelic</a>, <a href=https://scoutapm.com/>ScoutAPM</a> and others are provided more detail information can help us to determine the performance problem.</p><p>But the OpenSource solution like <a href=https://www.elastic.co/apm>ElasticAPM</a> is limited and only very simple trace information can be traced.</p><blockquote><p>The business solutions are had support memory tracking and helpful to find memory problems, but ElasticAPM is not supporting it but in the roadmap.</p></blockquote><h3 id=time>Time</h3><p>After sharing our experience and tools, the mentor points out a key point in tracing tools.</p><p>When we use these tools to trace our service, it usually related the time. And to prevent the network latency, the agent usually uses local time as timestamp and sends it to the trace server.</p><p>That means if we have two machines but the time is not synchronized, we may get an invalid timeline let us unable to find a correct problem in the dashboard.</p><p>For example, if we have 3 API calls (A => B => C) in this trace, one of the API server (B) has invalid local time. We may see the timeline shows the B is early than A, but it doesn&rsquo;t match the actual event time. It will cause us cannot correctly find the problem.</p><h3 id=dashboard>Dashboard</h3><p>Another important part is the dashboard. To find the problem in a short time usually depend on a good design dashboard to help developer trace the problem.</p><p>This is why the business solution is more mature than open-source projects, and we usually choose ElasticSearch as our self-hosting solution.</p><p>Building a powerful dashboard is not easy, but the trace isn&rsquo;t the highest priority in product development.</p><p>This is why we prefer to choose SaaS or an existing open-source project.</p><h2 id=technical-debt>Technical Debt</h2><p>This part we share our experience when we try to decide to refactor or schedule to resolve it.</p><p>I think we are agree to there no correct answers, but we still have some guide can follow.</p><h3 id=the-test>The Test</h3><p>To deal with the technical debt we usually have to refactor our code. To refactor the code, we need the test to ensure we didn&rsquo;t break anything.</p><p>In my experience, the &ldquo;spec&rdquo; is important. If we didn&rsquo;t have a correct spec, the test will focus on incorrect things and we get a useless test.</p><h3 id=the-known-and-unknown-debt>The known and unknown debt</h3><p>In work, we never always have enough time to write an ideal code. That means the event we didn&rsquo;t have technical debt, we still have to make technical debt due to the time limit.</p><p>In this case, we will add a <code>TODO</code> as a comment to waiting we can refactor it, and in another case, we may write some bad code we didn&rsquo;t know.</p><p>To resolve the known debt, most members agree to take the initiative to resolve it, and the unknown debt we still have to wait for it had appeared for us to fix them.</p><p>But the trace will help us find the hidden issue faster, this is connected to the previous topic we are talking about.</p><blockquote><p>And there we have another case cause the technical debt, the programming language is used too old version. The language will be improved after the upgrade and drop some syntax, it will cause we cannot let our old codes continue work in the newer version.</p></blockquote><h3 id=the-communicate>The communicate</h3><p>In the last, our mentor gives us a summary of his experience.</p><p>The reason causes the technical debt usually depends on the product team or marketing team requirement, but it will gain more value for the company.</p><p>If we want to have the time to deal with the technical debt, we have to explain the pros and cons to them.</p><p>And the programmer team usually be rejected, because others cannot figure out the importance of refactoring.</p><p>To resolve it, we had to convert the information to the same unit to compare that other teams can figure out it.</p><p>For example, we can explain the refactoring can improve the 10% in the future promote feature&rsquo;s development time. It will give the marketing team can be faster to push their new product, but we have to spend more 50% time at this time, to refactor it.</p><p>If the marketing team thinks this value is higher than keeping used the same way to add promote the feature, we will get the support to start this refactor.</p><h2 id=conclusion>Conclusion</h2><p>This meetup is shorter than previous meetups, but include other meetups, we almost covered all topics we want to discuss at the first.</p><p>In these meetups, I think I learned two important things. The first one is trying to find the key point or the core target of the architecture we are evaluating. This is important for us to pick a solution best to match our service and avoid the cons brakes it.</p><p>Another one is communication skill, this is a skill I attach importance to my work. But I only do it well with the programmers, but for my customer or non-programmer partners, I didn&rsquo;t work well for them. In most cases, I usually hope the project manager can do it for me. But it still important when I need to explain some technical considerations to them.</p><footer class=article__footer><div class=text-center><div class=fb-share-button data-href="<%- page.permalink %>" data-layout=button_count></div></div><div class="text-center mt-1"><style>.bmc-button img{width:27px!important;margin-bottom:1px!important;box-shadow:none!important;border:none!important;vertical-align:middle!important}.bmc-button{line-height:36px!important;height:37px!important;text-decoration:none!important;display:inline-flex!important;color:#fff!important;background-color:#000!important;border-radius:3px!important;border:1px solid transparent!important;padding:1px 9px!important;font-size:22px!important;letter-spacing:.6px!important;box-shadow:0 1px 2px rgba(190,190,190,.5)!important;-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;margin:0 auto!important;font-family:cookie,cursive!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;-o-transition:.3s all linear!important;-webkit-transition:.3s all linear!important;-moz-transition:.3s all linear!important;-ms-transition:.3s all linear!important;transition:.3s all linear!important}.bmc-button:hover,.bmc-button:active,.bmc-button:focus{-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;text-decoration:none!important;box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;opacity:.85!important;color:#fff!important}</style><link href="https://fonts.googleapis.com/css?family=Cookie&display=swap" rel=stylesheet><a class=bmc-button target=_blank href=https://www.buymeacoffee.com/aotoki><img src=https://bmc-cdn.nyc3.digitaloceanspaces.com/BMC-button-images/BMC-btn-logo.svg rel=noreferrer alt="Buy me a Coffee"><span style=margin-left:5px>Buy me a Coffee</span></a></div><iframe title=LikeCoin scrolling=no frameborder=0 style="display:block;margin:0 auto;height:212px" src="https://button.like.co/in/embed/elct9620/button?referrer=<%- page.permalink %>"></iframe><ul class=article__tag-list><li class=article__tag-list-item><a class=article__tag-list-link href=https://blog.frost.tw/en/tags/Experiance/>Experiance</a></li><li class=article__tag-list-item><a class=article__tag-list-link href=https://blog.frost.tw/en/tags/TGONext/>TGONext</a></li><li class=article__tag-list-item><a class=article__tag-list-link href=https://blog.frost.tw/en/tags/Architecture/>Architecture</a></li></ul></footer><aside class=related><header class=related__header><h3 class=related__title>See Also</h3></header><ul><li class=related__item><a class=related__link href=/en/posts/2020/04/03/TGONext-Database-Migration-and-Architecture-Changing/>TGONext: Database Migration and Architecture Changing</a></li><li class=related__item><a class=related__link href=/en/posts/2020/03/15/TGONext-Choose-Architecture-by-Cons/>TGONext: Choose Architecture By Cons</a></li><li class=related__item><a class=related__link href=/en/posts/2020/02/23/TGONext-The-plan-for-high-concurrency/>TGONext: The plan for high concurrency</a></li></ul></aside></div></article><div class=subscribe><div id=mc_embed_signup><form action="https://frost.us4.list-manage.com/subscribe/post?u=dd3d68032c0510041f1302539&id=d2a668a8aa" method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class=validate target=_blank novalidate><div id=mc_embed_signup_scroll><h1 class=subscribe__title>Newsletter</h2><div class=mc-field-group><input type=email name=EMAIL class="required email subscribe__input" id=mce-EMAIL placeholder=Email></div><div id=mce-responses class=clear><div class=response id=mce-error-response style=display:none></div><div class=response id=mce-success-response style=display:none></div></div><div style=position:absolute;left:-5000px aria-hidden=true><input type=text name=b_dd3d68032c0510041f1302539_d2a668a8aa tabindex=-1></div><div class=clear><input type=submit value=Subscribe name=subscribe id=mc-embedded-subscribe class="button subscribe__button"></div></div></form></div></div><div class=adv><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-2844969736316510 data-ad-slot=5530952976 data-ad-format=auto></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><section id=comment class=comment-box><h1 class=comment-box__title>Comments</h1><div id=disqus_thread></div></div></section></div><footer id=footer><div id=copyright>&copy;2021 <a href="https://plus.google.com/117236344655673213049?rel=author" target=_blank rel=noreferrer>蒼時弦也</a>. All right reversed.</div></footer><link rel=stylesheet href=/css/styles.css><script src=/js/app.min.6e03bcf752b31ab875459fbdd360c766632ead24687ffe499c4cf1f86e9fe489.js></script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5TQLRN" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-5TQLRN');</script><script>window.fbAsyncInit=function(){FB.init({appId:'178355449110',xfbml:true,version:'v2.12'});FB.AppEvents.logPageView();};(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return;}
js=d.createElement(s);js.id=id;js.src="https://connect.facebook.net/zh_TW/sdk.js";js.async=true
js.defer=true
fjs.parentNode.insertBefore(js,fjs);}(document,'script','facebook-jssdk'));</script><div class=loading></div></body></html>