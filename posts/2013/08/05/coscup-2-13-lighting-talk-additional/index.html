<!DOCTYPE html><html lang="zh-TW"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><title>COSCUP 2013 - Lighting Talk 補充 | 弦而時習之</title><meta name="theme-color" content="#EFEFEF"><meta name="author" content="蒼時弦也"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="description" content="其實我以為我很快就沒東西，沒想到還能超過一分鐘。第一次不知道該講什麼，我真的該分享一下怎麼制作的，是個很簡單卻又非常有趣的作品。因為 Github 的 API 是允許 Cross-Domain 存取的，也因為這樣，我才能夠順利地從 Github 上把我們 Staff 的個人簡介拉出來，然後透過 Backbone 去呈現。我一共用到了這些 JavaScript Libary / ToolsRequi"><meta name="keywords" content="JavaScript,COSCUP"><meta property="og:type" content="article"><meta property="og:title" content="COSCUP 2013 - Lighting Talk 補充"><meta property="og:url" content="https://blog.frost.tw/posts/2013/08/05/coscup-2-13-lighting-talk-additional/"><meta property="og:site_name" content="弦而時習之"><meta property="og:description" content="其實我以為我很快就沒東西，沒想到還能超過一分鐘。第一次不知道該講什麼，我真的該分享一下怎麼制作的，是個很簡單卻又非常有趣的作品。因為 Github 的 API 是允許 Cross-Domain 存取的，也因為這樣，我才能夠順利地從 Github 上把我們 Staff 的個人簡介拉出來，然後透過 Backbone 去呈現。我一共用到了這些 JavaScript Libary / ToolsRequi"><meta property="og:locale" content="zh-TW"><meta property="og:image" content="http://blog.frost.tw/icon-512.png"><meta property="og:updated_time" content="2019-06-29T07:42:39.057Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="COSCUP 2013 - Lighting Talk 補充"><meta name="twitter:description" content="其實我以為我很快就沒東西，沒想到還能超過一分鐘。第一次不知道該講什麼，我真的該分享一下怎麼制作的，是個很簡單卻又非常有趣的作品。因為 Github 的 API 是允許 Cross-Domain 存取的，也因為這樣，我才能夠順利地從 Github 上把我們 Staff 的個人簡介拉出來，然後透過 Backbone 去呈現。我一共用到了這些 JavaScript Libary / ToolsRequi"><meta name="twitter:image" content="http://blog.frost.tw/icon-512.png"><link rel="publisher" href="https://plus.google.com/117236344655673213049"><meta property="fb:app_id" content="178355449110"><meta property="fb:pages" content="180666522388"><script type="application/ld+json">[
{
    "@context": "http://schema.org",
    "@type": "Blog",
    "name": "弦而時習之",
    "url": "https://blog.frost.tw",
    "image": "http://blog.frost.tw/icon-512.png",
    "description": "蒼時弦也的個人網誌，專注在前端、後端以及遊戲開發，大多使用 Ruby 和 Ruby on Rails 以及 Golang、JS 和 C 語言。",
    "sameAs": [
      "https://www.facebook.com/frost.tw/"
    ]
},
{
    "@context": "http://schema.org",
    "@type": "Person",
    "name": "蒼時弦也",
    "url": "https://blog.frost.tw",
    "sameAs": [
      "https://www.facebook.com/elct9620",
      "https://www.instagram.com/elct9620/",
      "https://twitter.com/elct9620",
      "https://plus.google.com/+%E8%92%BC%E6%99%82%E5%BC%A6%E4%B9%9F-plus",
      "https://www.linkedin.com/in/elct9620"
    ]
},
{
  "@context":"http://schema.org",
  "@type":"BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://blog.frost.tw/posts/2013/08/05/coscup-2-13-lighting-talk-additional/"
  },
  "headline":"COSCUP 2013 - Lighting Talk 補充",
  "image": [
    
    "http://blog.frost.tw/icon-512.png"
  ],
  
  "datePublished": "2013-08-04T18:04:00.000Z",
  "dateModified": "2019-06-29T07:42:39.057Z",
  "description":"其實我以為我很快就沒東西，沒想到還能超過一分鐘。第一次不知道該講什麼，我真的該分享一下怎麼制作的，是個很簡單卻又非常有趣的作品。因為 Github 的 API 是允許 Cross-Domain 存取的，也因為這樣，我才能夠順利地從 Github 上把我們 Staff 的個人簡介拉出來，然後透過 Backbone 去呈現。我一共用到了這些 JavaScript Libary / ToolsRequireJS (AMD)RequireJS Text PluginBackbone.js (MVP/MVC)Underscore.js (相依)jQuery (DOM操作)Mustache.js (Template)Markdown.js (Praser)Modernizr實作也非常簡單，只需要約六七個檔案就能完成。",
  "author": {
    "@type": "Person",
    "name": "蒼時弦也"
  },
  "publisher": {
    "@type": "Organization",
    "name": "蒼時弦也",
    "logo": {
      "@type": "ImageObject",
      "url": "http://blog.forst.tw/logo-wide.png"
    }
  }
},
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
    "@type": "ListItem",
    "position": 1,
    "item": {
      "@id": "https://blog.frost.tw",
      "name": "弦而時習之 ",
      "image": "http://blog.frost.tw/icon-512.png"
    }
  },{
    "@type": "ListItem",
    "position": 2,
    "item": {
      "@id": "https://blog.frost.tw/posts/2013/08/05/coscup-2-13-lighting-talk-additional/",
      "name": "COSCUP 2013 - Lighting Talk 補充",
      "image": "http://blog.frost.tw/icon-512.png"
    }
  }]
}

]</script><link rel="canonical" href="https://blog.frost.tw/posts/2013/08/05/coscup-2-13-lighting-talk-additional/"><link href="/icon-512.png" rel="icon"><link rel="alternate" href="/feed.xml" title="弦而時習之" type="application/rss+xml"><!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--><link rel="stylesheet" href="/css/style.css" media="screen" type="text/css"><script async src="/js/turbolinks.js"></script></head><body><div id="fb-root" data-turbolinks-permanent></div><header id="header"><h1 id="sitename"><a href="/" class="hide-text logo--icon align-center">弦而時習之</a></h1><aside id="slogan" class="slogan align-center text-center"><h2 class="slogan__title">Aotokitsuruya</h2><p class="slogan__description">The Web is attracting me, so I start learning PHP, HTML, CSS and JavaScript. When I know about Ruby, I fall in love with it. Now, I working with my friend to design games using C++ and still learning web about Golang, Ruby and JavaScript. In the other side, I also be a designer, the reason why the web is attracted me.</p></aside></header><div id="wrapper"><article class="post article"><header class="article__header"><time datetime="2013-08-04T18:04:00.000Z" class="article__time--header">Aug.05</time><h1 class="article__title">COSCUP 2013 - Lighting Talk 補充</h1></header><div class="article__entry"><p>其實我以為我很快就沒東西，沒想到還能超過一分鐘。</p><p>第一次不知道該講什麼，我真的該分享一下怎麼制作的，是個很簡單卻又非常有趣的作品。</p><p>因為 Github 的 API 是允許 Cross-Domain 存取的，也因為這樣，我才能夠順利地從 Github 上把我們 Staff 的個人簡介拉出來，然後透過 Backbone 去呈現。</p><p>我一共用到了這些 JavaScript Libary / Tools</p><ul><li>RequireJS (AMD)<ul><li>RequireJS Text Plugin</li></ul></li><li>Backbone.js (MVP/MVC)<ul><li>Underscore.js (相依)</li></ul></li><li>jQuery (DOM操作)</li><li>Mustache.js (Template)</li><li>Markdown.js (Praser)</li><li>Modernizr</li></ul><p>實作也非常簡單，只需要約六七個檔案就能完成。</p><a id="more"></a><p>我個人的習慣會先以 H5BP 來建制預設的 Project 原型，再繼續製作後續的處理。</p><p>開始 Project 前，也會先將以確定需要的 Library 放到目錄，然後做一次 Initialize 的 Commit 進去。</p><p>（我是使用 Fire.app 開發的，在 JavaScript 套件管理上有點不方便，希望有時間可以送 Bower-like function 的 Pull Request 到 Fire.app）</p><p>每次使用 RequireJS 前，我會先把設定寫好，然後一個一個測試（在 main 中直接 require 個模組，然後測試是否正常運作）是否正常運行。</p><figure class="highlight coffeescript"><figcaption><span>main.coffee</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>.config &#123;</span><br><span class="line">  baseUrl: <span class="string">'JavaScripts'</span></span><br><span class="line">  paths: &#123;</span><br><span class="line">    jquery: [</span><br><span class="line">      <span class="string">'//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min'</span></span><br><span class="line">      <span class="string">'vendor/jquery-1.9.1.min'</span></span><br><span class="line">    ]</span><br><span class="line">    mustache: <span class="string">'vendor/mustache'</span></span><br><span class="line">    markdown: <span class="string">'vendor/markdown'</span></span><br><span class="line">    backbone: <span class="string">'vendor/backbone-min'</span></span><br><span class="line">    underscore: <span class="string">'vendor/underscore-min'</span></span><br><span class="line">    text: <span class="string">'vendor/require-text'</span></span><br><span class="line">  &#125;</span><br><span class="line">  shim: &#123;</span><br><span class="line">    <span class="string">'jquery'</span>: &#123;</span><br><span class="line">      exports: <span class="string">'$'</span></span><br><span class="line">    &#125;</span><br><span class="line">    markdown: &#123;</span><br><span class="line">      exports: <span class="string">'markdown'</span></span><br><span class="line">    &#125;</span><br><span class="line">    underscore: &#123;</span><br><span class="line">      deps: [<span class="string">'jquery'</span>]</span><br><span class="line">      exports: <span class="string">'_'</span></span><br><span class="line">    &#125;</span><br><span class="line">    backbone: &#123;</span><br><span class="line">      deps: [<span class="string">'jquery'</span>, <span class="string">'underscore'</span>]</span><br><span class="line">      exports: <span class="string">'Backbone'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>處理完畢後，我會習關另外開一個檔案，然後從 main 中讀取進來，並且進行一些操作。</p><figure class="highlight coffeescript"><figcaption><span>main.coffee</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span> [</span><br><span class="line">  <span class="string">'backbone'</span>, <span class="string">'App'</span></span><br><span class="line">], <span class="function"><span class="params">(Backbone, App)</span> -&gt;</span></span><br><span class="line">  <span class="keyword">new</span> App</span><br><span class="line">  Backbone.history.start &#123;pushState: <span class="literal">true</span>&#125;</span><br></pre></td></tr></table></figure><p>下面的 Code 我都會補上註解，我不太擅長一句句解釋完成的程式（牆角</p><figure class="highlight coffeescript"><figcaption><span>App.coffee</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">define [ <span class="comment"># 定義所有相依的 Library 但是僅在需要時才做出 require 的動作</span></span><br><span class="line">  <span class="string">'jquery'</span>, <span class="string">'backbone'</span>, <span class="string">'require'</span>,</span><br><span class="line">  <span class="comment"># Models</span></span><br><span class="line">  <span class="string">'Model/Information'</span>, <span class="string">'Model/Biography'</span></span><br><span class="line">  <span class="comment"># View</span></span><br><span class="line">  <span class="string">'View/InformationView'</span>, <span class="string">'View/BiographyView'</span></span><br><span class="line">], <span class="function"><span class="params">($, Backbone)</span> -&gt;</span></span><br><span class="line"></span><br><span class="line">  Backbone.Router.extend &#123; <span class="comment"># 傳回 Backbone Router 的物件</span></span><br><span class="line">    initialize: <span class="function">-&gt;</span> <span class="comment"># 初始化</span></span><br><span class="line">      @.el = $(<span class="string">"#app"</span>) <span class="comment"># 這次 Prototyping 並沒有使用到，原本應該放一個 Template 覆蓋後才建構子元件上去</span></span><br><span class="line"></span><br><span class="line">    routes: &#123; <span class="comment"># 定義 Router 這邊只需要 index 列出所有成員和 /username 網址格式的建構</span></span><br><span class="line">      <span class="string">''</span>: <span class="string">'index'</span>,</span><br><span class="line">      <span class="string">':username'</span>: <span class="string">'userPage'</span></span><br><span class="line">    &#125;</span><br><span class="line">    index: <span class="function">-&gt;</span> <span class="comment"># 首頁尚未實作，這邊會搭配 Staff Issue Tracker 系統列出成員</span></span><br><span class="line">      <span class="comment"># notings</span></span><br><span class="line">      <span class="built_in">console</span>.log <span class="string">"Index"</span></span><br><span class="line"></span><br><span class="line">    userPage: <span class="function"><span class="params">(username)</span> -&gt;</span></span><br><span class="line">    	<span class="comment"># 讀取 Model 的 Class</span></span><br><span class="line">      Information = <span class="built_in">require</span>(<span class="string">'Model/Information'</span>)</span><br><span class="line">      Biography = <span class="built_in">require</span>(<span class="string">'Model/Biography'</span>)</span><br><span class="line">truetruetrue</span><br><span class="line">      <span class="comment"># 讀取 View 的 Class</span></span><br><span class="line">      InformationView = <span class="built_in">require</span>(<span class="string">'View/InformationView'</span>)</span><br><span class="line">      BiographyView = <span class="built_in">require</span>(<span class="string">'View/BiographyView'</span>)</span><br><span class="line"></span><br><span class="line">truetruetrue<span class="comment"># 建構 Model （帶入 username 以利查詢使用者）</span></span><br><span class="line">      info = <span class="keyword">new</span> Information &#123;username: username&#125;</span><br><span class="line">      bio = <span class="keyword">new</span> Biography &#123;username: username&#125;</span><br><span class="line">truetruetrue</span><br><span class="line">      <span class="comment"># 建構 View 並且傳入綁定的元素和 Model</span></span><br><span class="line">      infoView = <span class="keyword">new</span> InformationView &#123;el: $(<span class="string">"#info"</span>), model: info&#125;</span><br><span class="line">      bioView = <span class="keyword">new</span> BiographyView &#123;el: $(<span class="string">"#bio"</span>), model: bio&#125;</span><br><span class="line"></span><br><span class="line">truetruetrue<span class="comment"># 從 Github 讀取資料</span></span><br><span class="line">      info.fetch()</span><br><span class="line">      bio.fetch()</span><br><span class="line"></span><br><span class="line">truetruetrue<span class="comment"># 讀取完畢後更新頁面</span></span><br><span class="line">      info.<span class="literal">on</span> <span class="string">'sync'</span>, <span class="function"><span class="params">(model)</span> -&gt;</span></span><br><span class="line">        infoView.render()</span><br><span class="line">      bio.<span class="literal">on</span> <span class="string">'sync'</span>, <span class="function"><span class="params">(model)</span> -&gt;</span></span><br><span class="line">        bioView.render()</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>事實上，這還能夠做出改進。</p><p>先把 on 的 Event 放入 View 裡面使用 listenTo 作處理，會比另外作更加有效率。</p><p>想要讀取 Github 的資料非常簡單，只需要用一般的 Ajax 即可。<br>不過預設傳回 json 以及內容的 base64 編碼資料，不過也可以改以請求 Raw 這部分可以透過加入 headers 的 Hash 完成。</p><figure class="highlight coffeescript"><figcaption><span>Model/Information.coffee</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">define [</span><br><span class="line">  <span class="string">'backbone'</span></span><br><span class="line">], <span class="function"><span class="params">(Backbone)</span> -&gt;</span></span><br><span class="line"></span><br><span class="line">  Backbone.Model.extend &#123;</span><br><span class="line">    url: <span class="function">-&gt;</span> <span class="comment"># 設定 Model 網址格式（因為要帶入使用者名稱，所以改以函示呈現）</span></span><br><span class="line">      <span class="string">"https://api.Github.com/repos/sitcon-tw/staff-card/contents/<span class="subst">#&#123;@.get(<span class="string">'username'</span>)&#125;</span>/info.json"</span></span><br><span class="line">    sync: <span class="function"><span class="params">(method, model, options)</span> -&gt;</span> <span class="comment"># 改變預設的 sync 方法</span></span><br><span class="line">      options = options || &#123;&#125;</span><br><span class="line">      options.headers = options.headers || &#123;&#125;</span><br><span class="line">     	<span class="comment"># 對 HTTP Request 加入 Accept 要求傳回 Github 的 raw 格式，而非 json</span></span><br><span class="line">      options.headers[<span class="string">'Accept'</span>] = <span class="string">"application/vnd.Github.raw"</span></span><br><span class="line"></span><br><span class="line">truetruetrue<span class="comment"># 傳給 Backbone 預設的 sync 進行處理</span></span><br><span class="line">      Backbone.sync method, model, options</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>前面有提到過，透過 Cross-Domain 的支援可以做到，另一方面是 jQuery 還能夠協助幫你把 text 的 json 轉回，非常貼心。也因為這樣，我們可以順利的把 info.json 這個檔案資訊直接放到 Model 裡面使用。</p><figure class="highlight coffeescript"><figcaption><span>Model/Biography.coffee</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">define [</span><br><span class="line">  <span class="string">'jquery'</span>, <span class="string">'backbone'</span></span><br><span class="line">], <span class="function"><span class="params">($, Backbone, Markdown)</span>-&gt;</span></span><br><span class="line"></span><br><span class="line">  Backbone.Model.extend &#123;</span><br><span class="line">    url: <span class="function">-&gt;</span></span><br><span class="line">      <span class="string">"https://api.Github.com/repos/sitcon-tw/staff-card/contents/<span class="subst">#&#123;@.get(<span class="string">'username'</span>)&#125;</span>/biography.md"</span></span><br><span class="line">    sync: <span class="function"><span class="params">(method, model, options)</span> -&gt;</span></span><br><span class="line">    	<span class="comment"># Backbone 非 JSON 不收，自己實作</span></span><br><span class="line">      self = @</span><br><span class="line">      $.ajax &#123;</span><br><span class="line">        headers: &#123;</span><br><span class="line">          <span class="string">'Accept'</span>: <span class="string">'application/vnd.Github.raw'</span></span><br><span class="line">        &#125;</span><br><span class="line">        url: self.url() <span class="comment"># 取得 URL (呼叫 Model 定義的)</span></span><br><span class="line">        success: <span class="function"><span class="params">(data, xhr)</span> -&gt;</span></span><br><span class="line">          self.parse(data, xhr) <span class="comment"># Backbone 收到資料可以交給 parse 方法格式化資料 Ex. 過濾、替換文字</span></span><br><span class="line">          self.trigger <span class="string">'sync'</span>, self <span class="comment"># 手動觸發 sync 事件，通知完成（可以自定，這裡是為了與 Backbone 統一）</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    parse: <span class="function"><span class="params">(res, options)</span> -&gt;</span></span><br><span class="line">      @.set(<span class="string">'content'</span>, res) <span class="comment"># 強制將收到的 raw Markdonw 內容存到 content 的欄位</span></span><br><span class="line">      &#123;content: res&#125; <span class="comment"># parse 需要回傳處理後的資料</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>其實這部分還是可以透過像是直接寫 jQuery 處理，或者覆蓋原有 Backbone.sync 方法，不過我最後選擇了這個比較笨，但是能確保原有方法乾淨的做法。</p><figure class="highlight coffeescript"><figcaption><span>View/Information.coffee</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">define [</span><br><span class="line">  <span class="string">'jquery'</span>, <span class="string">'backbone'</span>, <span class="string">'mustache'</span>, <span class="string">'text!JavaScripts/template/info.js.html'</span></span><br><span class="line">], <span class="function"><span class="params">($, Backbone, Mustache, infoTemplate)</span> -&gt;</span></span><br><span class="line"></span><br><span class="line">  Backbone.View.extend &#123;</span><br><span class="line">    initialize: <span class="function"><span class="params">(options)</span> -&gt;</span></span><br><span class="line">      options = options || &#123;&#125;</span><br><span class="line">      @.template = infoTemplate <span class="comment"># 設定樣板資料（text! 是 plugin 功能，將檔案內容完整存入）</span></span><br><span class="line">    render: <span class="function">-&gt;</span></span><br><span class="line">      rendered = Mustache.to_html @.template, @.model.toJSON() <span class="comment"># 用 Mustache 編譯樣板，第二個參數直接讓 Model 傳回 JSON 即可</span></span><br><span class="line">      $(@.el).html(rendered) <span class="comment"># 更新網頁元素（使用 @.$el.html(rendered) 應該也是能運作的）</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><figure class="highlight coffeescript"><figcaption><span>View/Biography.coffee</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">define [</span><br><span class="line">  <span class="string">'jquery'</span>, <span class="string">'backbone'</span>, <span class="string">'markdown'</span></span><br><span class="line">], <span class="function"><span class="params">($, Backbone, Markdown)</span> -&gt;</span></span><br><span class="line"></span><br><span class="line">  Backbone.View.extend &#123;</span><br><span class="line">    initialize: <span class="function"><span class="params">(options)</span> -&gt;</span></span><br><span class="line">      options = options || &#123;&#125;</span><br><span class="line">    render: <span class="function">-&gt;</span></span><br><span class="line">      rendered = Markdown.toHTML @.model.get(<span class="string">'content'</span>) <span class="comment"># 因為目前不需要樣板，直接用 Markdown.js 轉回 HTML</span></span><br><span class="line">      rendered = <span class="string">"&lt;h1&gt;Biography&lt;/h1&gt;"</span> + rendered <span class="comment"># 手動加上 Title</span></span><br><span class="line">      $(@.el).html(rendered) <span class="comment"># 更新網頁元素</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>其實整體來說這兩個 View 非常簡單，只要實作 Render 即可。</p><figure class="highlight html"><figcaption><span>JavaScripts/template/info.js.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;nickname&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  &#123;&#123;#website&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;&#123;website&#125;&#125;"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span>Website<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  &#123;&#123;/website&#125;&#125;</span><br><span class="line">  &#123;&#123;#facebook&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://fb.me/&#123;&#123;facebook&#125;&#125;"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span>Facebook<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  &#123;&#123;/facebook&#125;&#125;</span><br><span class="line">  &#123;&#123;#plurk&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://plurk.com/&#123;&#123;plurk&#125;&#125;"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span>Plurk<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  &#123;&#123;/plurk&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure><p>樣板部分也非常簡單，把需要的替換上去即可。</p><p>最後就是替首頁加上 #app, #info, #bio 三個元素，讓 Backbone 可以捕捉並且替換。</p><p>最後附上簡報：<a href="https://slid.es/elct9620/coscup2013-sitcon-webiste" rel="external nofollow noopener noreferrer" target="_blank">https://slid.es/elct9620/coscup2013-sitcon-webiste</a></p><p>希望大家會喜歡，之後網站組也會繼續改進這套系統。</p><p>當然，網站組也非常喜歡在 Github 分享作品，之後也會陸續追加網站組出品的各種小工具與網站。</p><footer class="article__footer"><div class="text-center"><div class="fb-share-button" data-href="https://blog.frost.tw/posts/2013/08/05/coscup-2-13-lighting-talk-additional/" data-layout="button_count"></div></div><p align="center"><a href="https://ko-fi.com/J3J78093" target="_blank" rel="external nofollow noopener noreferrer"><img height="36" style="border:0;height:36px" src="https://az743702.vo.msecnd.net/cdn/kofi5.png?v=0" border="0" alt="Buy Me a Coffee at ko-fi.com"></a></p><iframe scrolling="no" frameborder="0" style="display:block;margin:0 auto;height:212px" src="https://button.like.co/in/embed/elct9620/button?referrer=https://blog.frost.tw/posts/2013/08/05/coscup-2-13-lighting-talk-additional/"></iframe><ul class="article__tag-list"><li class="article__tag-list-item"><a class="article__tag-list-link" href="/tags/COSCUP/">COSCUP</a></li><li class="article__tag-list-item"><a class="article__tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul></footer></div></article><div class="adv"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-2844969736316510" data-ad-slot="5530952976" data-ad-format="auto"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><section id="comment" class="comment-box"><h1 class="comment-box__title">留言</h1><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a rel="nofollow" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></section></div><footer id="footer"><div id="copyright">&copy;2013 <a href="https://plus.google.com/117236344655673213049?rel=author" target="_blank" rel="external nofollow noopener noreferrer">蒼時弦也</a>. All right reversed.</div></footer><script type="text/javascript">window.disqus_shortname="revo-skill-frost",function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+window.disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5TQLRN" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="//www.googletagmanager.com/gtm.js?id=GTM-5TQLRN",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><script>window.fbAsyncInit=function(){FB.init({appId:"178355449110",xfbml:!0,version:"v2.12"}),FB.AppEvents.logPageView()},function(e,n,t){var o,s=e.getElementsByTagName(n)[0];e.getElementById(t)||((o=e.createElement(n)).id=t,o.src="https://connect.facebook.net/zh_TW/sdk.js",o.async=!0,s.parentNode.insertBefore(o,s))}(document,"script","facebook-jssdk")</script><script src="/js/app.js"></script><div class="loading"></div></body></html>