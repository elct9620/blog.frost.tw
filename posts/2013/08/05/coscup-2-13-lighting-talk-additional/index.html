<!doctype html><html lang=zh-tw><head><title>COSCUP 2013 - Lighting Talk 補充 - 弦而時習之</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=description content="其實我以為我很快就沒東西，沒想到還能超過一分鐘。
第一次不知道該講什麼，我真的該分享一下怎麼制作的，是個很簡單卻又非常有趣的作品。
因為 Github 的 API 是允許 Cross-Domain 存取的，也因為這樣，我才能夠順利地從 Github 上把我們 Staff 的個人簡介拉出來，然後透過 Backbone 去呈現。
我一共用到了 …"><meta name=created content="2013-08-05T00:00:00+0000"><meta name=modified content="0001-01-01T00:00:00+0000"><meta name=author content="蒼時弦也"><meta property="og:site_name" content="弦而時習之"><meta property="og:title" content="COSCUP 2013 - Lighting Talk 補充"><meta property="og:url" content="https://blog.frost.tw/posts/2013/08/05/coscup-2-13-lighting-talk-additional/"><meta property="og:type" content="article"><meta name=theme-color content="#EFEFEF"><link href=https://blog.frost.tw/icon-512.png rel=icon><link rel=canonical href=https://blog.frost.tw/posts/2013/08/05/coscup-2-13-lighting-talk-additional/><script type=application/ld+json>[{"@context":"https://schema.org","@type":"WebPage","headline":"COSCUP 2013 - Lighting Talk 補充","datePublished":"2013-08-05T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","url":"https://blog.frost.tw/posts/2013/08/05/coscup-2-13-lighting-talk-additional/","description":"其實我以為我很快就沒東西，沒想到還能超過一分鐘。\n第一次不知道該講什麼，我真的該分享一下怎麼制作的，是個很簡單卻又非常有趣的作品。\n因為 Github 的 API 是允許 Cross-Domain 存取的，也因為這樣，我才能夠順利地從 Github 上把我們 Staff 的個人簡介拉出來，然後透過 Backbone 去呈現。\n我一共用到了 …\n","keywords":["JavaScript","COSCUP"],"author":{"@type":"Person","name":"蒼時弦也"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.frost.tw/"},"publisher":{"@type":"Organization","name":"弦而時習之","url":"https://blog.frost.tw/"}},{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/blog.frost.tw\/","name":"弦而時習之","image":"http:\/\/blog.frost.tw\/icon-512.png"}},{"@type":"ListItem","position":2,"item":{"@id":"https:\/\/blog.frost.tw\/posts\/2013\/08\/05\/coscup-2-13-lighting-talk-additional\/","name":"COSCUP 2013 - Lighting Talk 補充"}}]}]</script><link rel=stylesheet href=/css/styls.css><script async src=/js/turbolinks.min.js></script></head><body><div id=fb-root data-turbolinks-permanent></div><h1 id=sitename><a href=/ class="hide-text logo--icon align-center">弦而時習之</a></h1><aside id=slogan class="slogan align-center text-center"><h2 class=slogan__title>Aotokitsuruya</h2><p class=slogan__description>The Web is attracting me, so I start learning PHP, HTML, CSS and JavaScript. When I know about Ruby, I fall in love with it. Now, I working with my friend to design games using C++ and still learning web about Golang, Ruby and JavaScript. In the other side, I also be a designer, the reason why the web is attracted me.</p></aside><div id=wrapper><article class="post article" role=article><header class=article__header><time datetime=0001-01-01T00:00:00+0000 class=article__time--header role=time>Feb.05</time><h1 class=article__title>COSCUP 2013 - Lighting Talk 補充</h1></header><div class=article__entry><nav class=translation></nav><p>其實我以為我很快就沒東西，沒想到還能超過一分鐘。</p><p>第一次不知道該講什麼，我真的該分享一下怎麼制作的，是個很簡單卻又非常有趣的作品。</p><p>因為 Github 的 API 是允許 Cross-Domain 存取的，也因為這樣，我才能夠順利地從 Github 上把我們 Staff 的個人簡介拉出來，然後透過 Backbone 去呈現。</p><p>我一共用到了這些 JavaScript Libary / Tools</p><ul><li>RequireJS (AMD)<ul><li>RequireJS Text Plugin</li></ul></li><li>Backbone.js (MVP/MVC)<ul><li>Underscore.js (相依)</li></ul></li><li>jQuery (DOM操作)</li><li>Mustache.js (Template)</li><li>Markdown.js (Praser)</li><li>Modernizr</li></ul><p>實作也非常簡單，只需要約六七個檔案就能完成。</p><p>我個人的習慣會先以 H5BP 來建制預設的 Project 原型，再繼續製作後續的處理。</p><p>開始 Project 前，也會先將以確定需要的 Library 放到目錄，然後做一次 Initialize 的 Commit 進去。</p><p>（我是使用 Fire.app 開發的，在 JavaScript 套件管理上有點不方便，希望有時間可以送 Bower-like function 的 Pull Request 到 Fire.app）</p><p>每次使用 RequireJS 前，我會先把設定寫好，然後一個一個測試（在 main 中直接 require 個模組，然後測試是否正常運作）是否正常運行。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-coffeescript data-lang=coffeescript><span class=nx>require</span><span class=p>.</span><span class=nx>config</span> <span class=p>{</span>
  <span class=nv>baseUrl: </span><span class=s>&#39;</span><span class=s>JavaScripts</span><span class=s>&#39;</span>
  <span class=nv>paths: </span><span class=p>{</span>
    <span class=nv>jquery: </span><span class=p>[</span>
      <span class=s>&#39;</span><span class=s>//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min</span><span class=s>&#39;</span>
      <span class=s>&#39;</span><span class=s>vendor/jquery-1.9.1.min</span><span class=s>&#39;</span>
    <span class=p>]</span>
    <span class=nv>mustache: </span><span class=s>&#39;</span><span class=s>vendor/mustache</span><span class=s>&#39;</span>
    <span class=nv>markdown: </span><span class=s>&#39;</span><span class=s>vendor/markdown</span><span class=s>&#39;</span>
    <span class=nv>backbone: </span><span class=s>&#39;</span><span class=s>vendor/backbone-min</span><span class=s>&#39;</span>
    <span class=nv>underscore: </span><span class=s>&#39;</span><span class=s>vendor/underscore-min</span><span class=s>&#39;</span>
    <span class=nv>text: </span><span class=s>&#39;</span><span class=s>vendor/require-text</span><span class=s>&#39;</span>
  <span class=p>}</span>
  <span class=nv>shim: </span><span class=p>{</span>
    <span class=s>&#39;</span><span class=s>jquery</span><span class=s>&#39;</span><span class=o>:</span> <span class=p>{</span>
      <span class=nv>exports: </span><span class=s>&#39;</span><span class=s>$</span><span class=s>&#39;</span>
    <span class=p>}</span>
    <span class=nv>markdown: </span><span class=p>{</span>
      <span class=nv>exports: </span><span class=s>&#39;</span><span class=s>markdown</span><span class=s>&#39;</span>
    <span class=p>}</span>
    <span class=nv>underscore: </span><span class=p>{</span>
      <span class=nv>deps: </span><span class=p>[</span><span class=s>&#39;</span><span class=s>jquery</span><span class=s>&#39;</span><span class=p>]</span>
      <span class=nv>exports: </span><span class=s>&#39;</span><span class=s>_</span><span class=s>&#39;</span>
    <span class=p>}</span>
    <span class=nv>backbone: </span><span class=p>{</span>
      <span class=nv>deps: </span><span class=p>[</span><span class=s>&#39;</span><span class=s>jquery</span><span class=s>&#39;</span><span class=p>,</span> <span class=s>&#39;</span><span class=s>underscore</span><span class=s>&#39;</span><span class=p>]</span>
      <span class=nv>exports: </span><span class=s>&#39;</span><span class=s>Backbone</span><span class=s>&#39;</span>
    <span class=p>}</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p>處理完畢後，我會習關另外開一個檔案，然後從 main 中讀取進來，並且進行一些操作。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-coffeescript data-lang=coffeescript><span class=nx>require</span> <span class=p>[</span>
  <span class=s>&#39;</span><span class=s>backbone</span><span class=s>&#39;</span><span class=p>,</span> <span class=s>&#39;</span><span class=s>App</span><span class=s>&#39;</span>
<span class=p>]</span><span class=p>,</span> <span class=nf>(Backbone, App) -&gt;</span>
  <span class=k>new</span> <span class=nx>App</span>
  <span class=nx>Backbone</span><span class=p>.</span><span class=nx>history</span><span class=p>.</span><span class=nx>start</span> <span class=p>{</span><span class=nv>pushState: </span><span class=kc>true</span><span class=p>}</span>
</code></pre></td></tr></table></div></div><p>下面的 Code 我都會補上註解，我不太擅長一句句解釋完成的程式（牆角</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-coffeescript data-lang=coffeescript><span class=nx>define</span> <span class=p>[</span> <span class=c1># 定義所有相依的 Library 但是僅在需要時才做出 require 的動作
</span><span class=c1></span>  <span class=s>&#39;</span><span class=s>jquery</span><span class=s>&#39;</span><span class=p>,</span> <span class=s>&#39;</span><span class=s>backbone</span><span class=s>&#39;</span><span class=p>,</span> <span class=s>&#39;</span><span class=s>require</span><span class=s>&#39;</span><span class=p>,</span>
  <span class=c1># Models
</span><span class=c1></span>  <span class=s>&#39;</span><span class=s>Model/Information</span><span class=s>&#39;</span><span class=p>,</span> <span class=s>&#39;</span><span class=s>Model/Biography</span><span class=s>&#39;</span>
  <span class=c1># View
</span><span class=c1></span>  <span class=s>&#39;</span><span class=s>View/InformationView</span><span class=s>&#39;</span><span class=p>,</span> <span class=s>&#39;</span><span class=s>View/BiographyView</span><span class=s>&#39;</span>
<span class=p>]</span><span class=p>,</span> <span class=nf>($, Backbone) -&gt;</span>

  <span class=nx>Backbone</span><span class=p>.</span><span class=nx>Router</span><span class=p>.</span><span class=nx>extend</span> <span class=p>{</span> <span class=c1># 傳回 Backbone Router 的物件
</span><span class=c1></span>    <span class=nv>initialize: </span><span class=nf>-&gt;</span> <span class=c1># 初始化
</span><span class=c1></span>      <span class=nx>@</span><span class=p>.</span><span class=nv>el = </span><span class=nx>$</span><span class=p>(</span><span class=s>&#34;</span><span class=s>#</span><span class=s>app</span><span class=s>&#34;</span><span class=p>)</span> <span class=c1># 這次 Prototyping 並沒有使用到，原本應該放一個 Template 覆蓋後才建構子元件上去
</span><span class=c1></span>
    <span class=nv>routes: </span><span class=p>{</span> <span class=c1># 定義 Router 這邊只需要 index 列出所有成員和 /username 網址格式的建構
</span><span class=c1></span>      <span class=s>&#39;</span><span class=s>&#39;</span><span class=o>:</span> <span class=s>&#39;</span><span class=s>index</span><span class=s>&#39;</span><span class=p>,</span>
      <span class=s>&#39;</span><span class=s>:username</span><span class=s>&#39;</span><span class=o>:</span> <span class=s>&#39;</span><span class=s>userPage</span><span class=s>&#39;</span>
    <span class=p>}</span>
    <span class=nv>index: </span><span class=nf>-&gt;</span> <span class=c1># 首頁尚未實作，這邊會搭配 Staff Issue Tracker 系統列出成員
</span><span class=c1></span>      <span class=c1># notings
</span><span class=c1></span>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span> <span class=s>&#34;</span><span class=s>Index</span><span class=s>&#34;</span>

    <span class=nv>userPage: </span><span class=nf>(username) -&gt;</span>
    	<span class=c1># 讀取 Model 的 Class
</span><span class=c1></span>      <span class=nv>Information = </span><span class=nx>require</span><span class=p>(</span><span class=s>&#39;</span><span class=s>Model/Information</span><span class=s>&#39;</span><span class=p>)</span>
      <span class=nv>Biography = </span><span class=nx>require</span><span class=p>(</span><span class=s>&#39;</span><span class=s>Model/Biography</span><span class=s>&#39;</span><span class=p>)</span>
			
      <span class=c1># 讀取 View 的 Class
</span><span class=c1></span>      <span class=nv>InformationView = </span><span class=nx>require</span><span class=p>(</span><span class=s>&#39;</span><span class=s>View/InformationView</span><span class=s>&#39;</span><span class=p>)</span>
      <span class=nv>BiographyView = </span><span class=nx>require</span><span class=p>(</span><span class=s>&#39;</span><span class=s>View/BiographyView</span><span class=s>&#39;</span><span class=p>)</span>

			<span class=c1># 建構 Model （帶入 username 以利查詢使用者）
</span><span class=c1></span>      <span class=nv>info = </span><span class=k>new</span> <span class=nx>Information</span> <span class=p>{</span><span class=nv>username: </span><span class=nx>username</span><span class=p>}</span>
      <span class=nv>bio = </span><span class=k>new</span> <span class=nx>Biography</span> <span class=p>{</span><span class=nv>username: </span><span class=nx>username</span><span class=p>}</span>
			
      <span class=c1># 建構 View 並且傳入綁定的元素和 Model
</span><span class=c1></span>      <span class=nv>infoView = </span><span class=k>new</span> <span class=nx>InformationView</span> <span class=p>{</span><span class=nv>el: </span><span class=nx>$</span><span class=p>(</span><span class=s>&#34;</span><span class=s>#</span><span class=s>info</span><span class=s>&#34;</span><span class=p>)</span><span class=p>,</span> <span class=nv>model: </span><span class=nx>info</span><span class=p>}</span>
      <span class=nv>bioView = </span><span class=k>new</span> <span class=nx>BiographyView</span> <span class=p>{</span><span class=nv>el: </span><span class=nx>$</span><span class=p>(</span><span class=s>&#34;</span><span class=s>#</span><span class=s>bio</span><span class=s>&#34;</span><span class=p>)</span><span class=p>,</span> <span class=nv>model: </span><span class=nx>bio</span><span class=p>}</span>

			<span class=c1># 從 Github 讀取資料
</span><span class=c1></span>      <span class=nx>info</span><span class=p>.</span><span class=nx>fetch</span><span class=p>(</span><span class=p>)</span>
      <span class=nx>bio</span><span class=p>.</span><span class=nx>fetch</span><span class=p>(</span><span class=p>)</span>

			<span class=c1># 讀取完畢後更新頁面
</span><span class=c1></span>      <span class=nx>info</span><span class=p>.</span><span class=nx>on</span> <span class=s>&#39;</span><span class=s>sync</span><span class=s>&#39;</span><span class=p>,</span> <span class=nf>(model) -&gt;</span>
        <span class=nx>infoView</span><span class=p>.</span><span class=nx>render</span><span class=p>(</span><span class=p>)</span>
      <span class=nx>bio</span><span class=p>.</span><span class=nx>on</span> <span class=s>&#39;</span><span class=s>sync</span><span class=s>&#39;</span><span class=p>,</span> <span class=nf>(model) -&gt;</span>
        <span class=nx>bioView</span><span class=p>.</span><span class=nx>render</span><span class=p>(</span><span class=p>)</span>
  <span class=p>}</span>
</code></pre></td></tr></table></div></div><p>事實上，這還能夠做出改進。</p><p>先把 on 的 Event 放入 View 裡面使用 listenTo 作處理，會比另外作更加有效率。</p><p>想要讀取 Github 的資料非常簡單，只需要用一般的 Ajax 即可。
不過預設傳回 json 以及內容的 base64 編碼資料，不過也可以改以請求 Raw 這部分可以透過加入 headers 的 Hash 完成。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-coffeescript data-lang=coffeescript><span class=nx>define</span> <span class=p>[</span>
  <span class=s>&#39;</span><span class=s>backbone</span><span class=s>&#39;</span>
<span class=p>]</span><span class=p>,</span> <span class=nf>(Backbone) -&gt;</span>

  <span class=nx>Backbone</span><span class=p>.</span><span class=nx>Model</span><span class=p>.</span><span class=nx>extend</span> <span class=p>{</span>
    <span class=nv>url: </span><span class=nf>-&gt;</span> <span class=c1># 設定 Model 網址格式（因為要帶入使用者名稱，所以改以函示呈現）
</span><span class=c1></span>      <span class=s>&#34;</span><span class=s>https://api.Github.com/repos/sitcon-tw/staff-card/contents/</span><span class=si>#{</span><span class=nx>@</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s>&#39;</span><span class=s>username</span><span class=s>&#39;</span><span class=p>)</span><span class=si>}</span><span class=s>/info.json</span><span class=s>&#34;</span>
    <span class=nv>sync: </span><span class=nf>(method, model, options) -&gt;</span> <span class=c1># 改變預設的 sync 方法
</span><span class=c1></span>      <span class=nv>options = </span><span class=nx>options</span> <span class=o>||</span> <span class=p>{</span><span class=p>}</span>
      <span class=nv>options.headers = </span><span class=nx>options</span><span class=p>.</span><span class=nx>headers</span> <span class=o>||</span> <span class=p>{</span><span class=p>}</span>
     	<span class=c1># 對 HTTP Request 加入 Accept 要求傳回 Github 的 raw 格式，而非 json
</span><span class=c1></span>      <span class=nx>options</span><span class=p>.</span><span class=nx>headers</span><span class=p>[</span><span class=s>&#39;</span><span class=s>Accept</span><span class=s>&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s>&#34;</span><span class=s>application/vnd.Github.raw</span><span class=s>&#34;</span>

			<span class=c1># 傳給 Backbone 預設的 sync 進行處理
</span><span class=c1></span>      <span class=nx>Backbone</span><span class=p>.</span><span class=nx>sync</span> <span class=nx>method</span><span class=p>,</span> <span class=nx>model</span><span class=p>,</span> <span class=nx>options</span>
  <span class=p>}</span>
</code></pre></td></tr></table></div></div><p>前面有提到過，透過 Cross-Domain 的支援可以做到，另一方面是 jQuery 還能夠協助幫你把 text 的 json 轉回，非常貼心。也因為這樣，我們可以順利的把 info.json 這個檔案資訊直接放到 Model 裡面使用。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-coffeescript data-lang=coffeescript><span class=nx>define</span> <span class=p>[</span>
  <span class=s>&#39;</span><span class=s>jquery</span><span class=s>&#39;</span><span class=p>,</span> <span class=s>&#39;</span><span class=s>backbone</span><span class=s>&#39;</span>
<span class=p>]</span><span class=p>,</span> <span class=nf>($, Backbone, Markdown)-&gt;</span>

  <span class=nx>Backbone</span><span class=p>.</span><span class=nx>Model</span><span class=p>.</span><span class=nx>extend</span> <span class=p>{</span>
    <span class=nv>url: </span><span class=nf>-&gt;</span>
      <span class=s>&#34;</span><span class=s>https://api.Github.com/repos/sitcon-tw/staff-card/contents/</span><span class=si>#{</span><span class=nx>@</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s>&#39;</span><span class=s>username</span><span class=s>&#39;</span><span class=p>)</span><span class=si>}</span><span class=s>/biography.md</span><span class=s>&#34;</span>
    <span class=nv>sync: </span><span class=nf>(method, model, options) -&gt;</span>
    	<span class=c1># Backbone 非 JSON 不收，自己實作
</span><span class=c1></span>      <span class=nv>self = </span><span class=nx>@</span>
      <span class=nx>$</span><span class=p>.</span><span class=nx>ajax</span> <span class=p>{</span>
        <span class=nv>headers: </span><span class=p>{</span>
          <span class=s>&#39;</span><span class=s>Accept</span><span class=s>&#39;</span><span class=o>:</span> <span class=s>&#39;</span><span class=s>application/vnd.Github.raw</span><span class=s>&#39;</span>
        <span class=p>}</span>
        <span class=nv>url: </span><span class=nx>self</span><span class=p>.</span><span class=nx>url</span><span class=p>(</span><span class=p>)</span> <span class=c1># 取得 URL (呼叫 Model 定義的)
</span><span class=c1></span>        <span class=nv>success: </span><span class=nf>(data, xhr) -&gt;</span>
          <span class=nx>self</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>data</span><span class=p>,</span> <span class=nx>xhr</span><span class=p>)</span> <span class=c1># Backbone 收到資料可以交給 parse 方法格式化資料 Ex. 過濾、替換文字
</span><span class=c1></span>          <span class=nx>self</span><span class=p>.</span><span class=nx>trigger</span> <span class=s>&#39;</span><span class=s>sync</span><span class=s>&#39;</span><span class=p>,</span> <span class=nx>self</span> <span class=c1># 手動觸發 sync 事件，通知完成（可以自定，這裡是為了與 Backbone 統一）
</span><span class=c1></span>      <span class=p>}</span>

    <span class=nv>parse: </span><span class=nf>(res, options) -&gt;</span>
      <span class=nx>@</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=s>&#39;</span><span class=s>content</span><span class=s>&#39;</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=c1># 強制將收到的 raw Markdonw 內容存到 content 的欄位
</span><span class=c1></span>      <span class=p>{</span><span class=nv>content: </span><span class=nx>res</span><span class=p>}</span> <span class=c1># parse 需要回傳處理後的資料
</span><span class=c1></span>  <span class=p>}</span>
</code></pre></td></tr></table></div></div><p>其實這部分還是可以透過像是直接寫 jQuery 處理，或者覆蓋原有 Backbone.sync 方法，不過我最後選擇了這個比較笨，但是能確保原有方法乾淨的做法。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-coffeescript data-lang=coffeescript><span class=nx>define</span> <span class=p>[</span>
  <span class=s>&#39;</span><span class=s>jquery</span><span class=s>&#39;</span><span class=p>,</span> <span class=s>&#39;</span><span class=s>backbone</span><span class=s>&#39;</span><span class=p>,</span> <span class=s>&#39;</span><span class=s>mustache</span><span class=s>&#39;</span><span class=p>,</span> <span class=s>&#39;</span><span class=s>text!JavaScripts/template/info.js.html</span><span class=s>&#39;</span>
<span class=p>]</span><span class=p>,</span> <span class=nf>($, Backbone, Mustache, infoTemplate) -&gt;</span>

  <span class=nx>Backbone</span><span class=p>.</span><span class=nx>View</span><span class=p>.</span><span class=nx>extend</span> <span class=p>{</span>
    <span class=nv>initialize: </span><span class=nf>(options) -&gt;</span>
      <span class=nv>options = </span><span class=nx>options</span> <span class=o>||</span> <span class=p>{</span><span class=p>}</span>
      <span class=nx>@</span><span class=p>.</span><span class=nv>template = </span><span class=nx>infoTemplate</span> <span class=c1># 設定樣板資料（text! 是 plugin 功能，將檔案內容完整存入）
</span><span class=c1></span>    <span class=nv>render: </span><span class=nf>-&gt;</span>
      <span class=nv>rendered = </span><span class=nx>Mustache</span><span class=p>.</span><span class=nx>to_html</span> <span class=nx>@</span><span class=p>.</span><span class=nx>template</span><span class=p>,</span> <span class=nx>@</span><span class=p>.</span><span class=nx>model</span><span class=p>.</span><span class=nx>toJSON</span><span class=p>(</span><span class=p>)</span> <span class=c1># 用 Mustache 編譯樣板，第二個參數直接讓 Model 傳回 JSON 即可
</span><span class=c1></span>      <span class=nx>$</span><span class=p>(</span><span class=nx>@</span><span class=p>.</span><span class=nx>el</span><span class=p>)</span><span class=p>.</span><span class=nx>html</span><span class=p>(</span><span class=nx>rendered</span><span class=p>)</span> <span class=c1># 更新網頁元素（使用 @.$el.html(rendered) 應該也是能運作的）
</span><span class=c1></span>  <span class=p>}</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-coffeescript data-lang=coffeescript><span class=nx>define</span> <span class=p>[</span>
  <span class=s>&#39;</span><span class=s>jquery</span><span class=s>&#39;</span><span class=p>,</span> <span class=s>&#39;</span><span class=s>backbone</span><span class=s>&#39;</span><span class=p>,</span> <span class=s>&#39;</span><span class=s>markdown</span><span class=s>&#39;</span>
<span class=p>]</span><span class=p>,</span> <span class=nf>($, Backbone, Markdown) -&gt;</span>

  <span class=nx>Backbone</span><span class=p>.</span><span class=nx>View</span><span class=p>.</span><span class=nx>extend</span> <span class=p>{</span>
    <span class=nv>initialize: </span><span class=nf>(options) -&gt;</span>
      <span class=nv>options = </span><span class=nx>options</span> <span class=o>||</span> <span class=p>{</span><span class=p>}</span>
    <span class=nv>render: </span><span class=nf>-&gt;</span>
      <span class=nv>rendered = </span><span class=nx>Markdown</span><span class=p>.</span><span class=nx>toHTML</span> <span class=nx>@</span><span class=p>.</span><span class=nx>model</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s>&#39;</span><span class=s>content</span><span class=s>&#39;</span><span class=p>)</span> <span class=c1># 因為目前不需要樣板，直接用 Markdown.js 轉回 HTML
</span><span class=c1></span>      <span class=nv>rendered = </span><span class=s>&#34;</span><span class=s>&lt;h1&gt;Biography&lt;/h1&gt;</span><span class=s>&#34;</span> <span class=o>+</span> <span class=nx>rendered</span> <span class=c1># 手動加上 Title
</span><span class=c1></span>      <span class=nx>$</span><span class=p>(</span><span class=nx>@</span><span class=p>.</span><span class=nx>el</span><span class=p>)</span><span class=p>.</span><span class=nx>html</span><span class=p>(</span><span class=nx>rendered</span><span class=p>)</span> <span class=c1># 更新網頁元素
</span><span class=c1></span>  <span class=p>}</span>
</code></pre></td></tr></table></div></div><p>其實整體來說這兩個 View 非常簡單，只要實作 Render 即可。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-html data-lang=html>{% raw %}
<span class=p>&lt;</span><span class=nt>ul</span><span class=p></span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>li</span><span class=p></span><span class=p>&gt;</span><span class=p>&lt;</span><span class=nt>h1</span><span class=p></span><span class=p>&gt;</span>{{nickname}}<span class=p>&lt;</span><span class=p>/</span><span class=nt>h1</span><span class=p>&gt;</span><span class=p>&lt;</span><span class=p>/</span><span class=nt>li</span><span class=p>&gt;</span>
  {{#website}}
  <span class=p>&lt;</span><span class=nt>li</span><span class=p></span><span class=p>&gt;</span><span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;{{website}}&#34;</span> <span class=na>target</span><span class=o>=</span><span class=s>&#34;_blank&#34;</span><span class=p></span><span class=p>&gt;</span>Website<span class=p>&lt;</span><span class=p>/</span><span class=nt>a</span><span class=p>&gt;</span><span class=p>&lt;</span><span class=p>/</span><span class=nt>li</span><span class=p>&gt;</span>
  {{/website}}
  {{#facebook}}
  <span class=p>&lt;</span><span class=nt>li</span><span class=p></span><span class=p>&gt;</span><span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://fb.me/{{facebook}}&#34;</span> <span class=na>target</span><span class=o>=</span><span class=s>&#34;_blank&#34;</span><span class=p></span><span class=p>&gt;</span>Facebook<span class=p>&lt;</span><span class=p>/</span><span class=nt>a</span><span class=p>&gt;</span><span class=p>&lt;</span><span class=p>/</span><span class=nt>li</span><span class=p>&gt;</span>
  {{/facebook}}
  {{#plurk}}
  <span class=p>&lt;</span><span class=nt>li</span><span class=p></span><span class=p>&gt;</span><span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://plurk.com/{{plurk}}&#34;</span> <span class=na>target</span><span class=o>=</span><span class=s>&#34;_blank&#34;</span><span class=p></span><span class=p>&gt;</span>Plurk<span class=p>&lt;</span><span class=p>/</span><span class=nt>a</span><span class=p>&gt;</span><span class=p>&lt;</span><span class=p>/</span><span class=nt>li</span><span class=p>&gt;</span>
  {{/plurk}}
<span class=p>&lt;</span><span class=p>/</span><span class=nt>ul</span><span class=p>&gt;</span>
{% endraw %}
</code></pre></td></tr></table></div></div><p>樣板部分也非常簡單，把需要的替換上去即可。</p><p>最後就是替首頁加上 #app, #info, #bio 三個元素，讓 Backbone 可以捕捉並且替換。</p><p>最後附上簡報：<a href=https://slid.es/elct9620/coscup2013-sitcon-webiste>https://slid.es/elct9620/coscup2013-sitcon-webiste</a></p><p>希望大家會喜歡，之後網站組也會繼續改進這套系統。</p><p>當然，網站組也非常喜歡在 Github 分享作品，之後也會陸續追加網站組出品的各種小工具與網站。</p><footer class=article__footer><div class=text-center><div class=fb-share-button data-href="<%- page.permalink %>" data-layout=button_count></div></div><div class="text-center mt-1"><style>.bmc-button img{width:27px!important;margin-bottom:1px!important;box-shadow:none!important;border:none!important;vertical-align:middle!important}.bmc-button{line-height:36px!important;height:37px!important;text-decoration:none!important;display:inline-flex!important;color:#fff!important;background-color:#000!important;border-radius:3px!important;border:1px solid transparent!important;padding:1px 9px!important;font-size:22px!important;letter-spacing:.6px!important;box-shadow:0 1px 2px rgba(190,190,190,.5)!important;-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;margin:0 auto!important;font-family:cookie,cursive!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;-o-transition:.3s all linear!important;-webkit-transition:.3s all linear!important;-moz-transition:.3s all linear!important;-ms-transition:.3s all linear!important;transition:.3s all linear!important}.bmc-button:hover,.bmc-button:active,.bmc-button:focus{-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;text-decoration:none!important;box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;opacity:.85!important;color:#fff!important}</style><link href="https://fonts.googleapis.com/css?family=Cookie" rel=stylesheet><a class=bmc-button target=_blank href=https://www.buymeacoffee.com/aotoki><img src=https://bmc-cdn.nyc3.digitaloceanspaces.com/BMC-button-images/BMC-btn-logo.svg alt="Buy me a Coffee"><span style=margin-left:5px>Buy me a Coffee</span></a></div><iframe scrolling=no frameborder=0 style="display:block;margin:0 auto;height:212px" src="https://button.like.co/in/embed/elct9620/button?referrer=<%- page.permalink %>"></iframe><ul class=article__tag-list><li class=article__tag-list-item><a class=article__tag-list-link href=https://blog.frost.tw/tags/JavaScript/>JavaScript</a></li><li class=article__tag-list-item><a class=article__tag-list-link href=https://blog.frost.tw/tags/COSCUP/>COSCUP</a></li></ul></footer><aside class=related><header class=related__header><h3 class=related__title>相關文章</h3></header><ul><li class=related__item><a class=related__link href=/posts/2019/10/20/COSCUP-2019-Talk-about-the-browser-game-Unlight-which-I-revived-it-Part-2/>COSCUP 2019 - 演講後談復活的頁遊 - Unlight （二）</a></li><li class=related__item><a class=related__link href=/posts/2019/09/03/COSCUP-2019-Talk-about-the-browser-game-Unlight-which-I-revived-it/>COSCUP 2019 - 演講後談復活的頁遊 - Unlight （一）</a></li><li class=related__item><a class=related__link href=/posts/2013/08/29/react-facebook-ui-component-library/>React - Facebook 的 UI 元件 Library</a></li><li class=related__item><a class=related__link href=/posts/2013/09/18/v-play-engine-and-the-corona-sdk-simple-different/>V-Play Engine 與 Corona SDK 的簡易比較</a></li><li class=related__item><a class=related__link href=/posts/2013/11/11/busy-but-also-to-write-about-nko-2013/>在忙，也要寫一下 NKO 2013</a></li></ul></aside></div></article><div class=adv><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-2844969736316510 data-ad-slot=5530952976 data-ad-format=auto></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><section id=comment class=comment-box><h1 class=comment-box__title>留言</h1><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"revo-skill-frost"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></section></div><footer id=footer><div id=copyright>&copy;2020 <a href="https://plus.google.com/117236344655673213049?rel=author" target=_blank rel=noreferrer>蒼時弦也</a>. All right reversed.</div></footer><script src=/js/app.min.e979702d4c2a76dd5e32acda7647b733e4959a8621df075338d00d2c6837e87a.js></script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5TQLRN" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-5TQLRN');</script><script>window.fbAsyncInit=function(){FB.init({appId:'178355449110',xfbml:true,version:'v2.12'});FB.AppEvents.logPageView();};(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return;}
js=d.createElement(s);js.id=id;js.src="https://connect.facebook.net/zh_TW/sdk.js";js.async=true
js.defer=true
fjs.parentNode.insertBefore(js,fjs);}(document,'script','facebook-jssdk'));</script><div class=loading></div></body></html>