<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  
  <title>React - Facebook 的 UI 元件 Library | 弦而時習之</title>
  <meta name="theme-color" content="#EFEFEF">

  <meta name="author" content="蒼時弦也">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1">

  <meta name="description" content="昨天在 TEDxTaipei 實習的時候說要修正之前 Timer (計時器) 的錯誤，我馬上就想到可以用 Facebook 的 React 來改寫。 之前就非常想玩看看，這次完了之後發現確實不錯，可以來推一下 XDD 註：暑假剛好有機會在 TEDxTaipei 實習，主要處理 WordPress 後端一些 PHP Code 和一些與前端搭配的技術，而計時器在 TEDxTaipei 會自行製作是因為">
<meta name="keywords" content="JavaScript,CoffeeScript,UI,前端,界面">
<meta property="og:type" content="article">
<meta property="og:title" content="React - Facebook 的 UI 元件 Library">
<meta property="og:url" content="http://blog.frost.tw/posts/2013/08/29/react-facebook-ui-component-library/">
<meta property="og:site_name" content="弦而時習之">
<meta property="og:description" content="昨天在 TEDxTaipei 實習的時候說要修正之前 Timer (計時器) 的錯誤，我馬上就想到可以用 Facebook 的 React 來改寫。 之前就非常想玩看看，這次完了之後發現確實不錯，可以來推一下 XDD 註：暑假剛好有機會在 TEDxTaipei 實習，主要處理 WordPress 後端一些 PHP Code 和一些與前端搭配的技術，而計時器在 TEDxTaipei 會自行製作是因為">
<meta property="og:locale" content="zh-TW">
<meta property="og:image" content="http://blog.frost.tw/icon-512.png">
<meta property="og:updated_time" content="2017-07-02T17:07:07.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="React - Facebook 的 UI 元件 Library">
<meta name="twitter:description" content="昨天在 TEDxTaipei 實習的時候說要修正之前 Timer (計時器) 的錯誤，我馬上就想到可以用 Facebook 的 React 來改寫。 之前就非常想玩看看，這次完了之後發現確實不錯，可以來推一下 XDD 註：暑假剛好有機會在 TEDxTaipei 實習，主要處理 WordPress 後端一些 PHP Code 和一些與前端搭配的技術，而計時器在 TEDxTaipei 會自行製作是因為">
<meta name="twitter:image" content="http://blog.frost.tw/icon-512.png">
<link rel="publisher" href="https://plus.google.com/117236344655673213049">
<meta property="fb:app_id" content="205000946197077">

  <script type="application/ld+json">

{
  "@context":"http://schema.org",
  "@type":"Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://blog.frost.tw/posts/2013/08/29/react-facebook-ui-component-library/"
  },
  "headline":"React - Facebook 的 UI 元件 Library",
  "image": [
    
    "http://user-image.logdown.io/user/52/blog/52/post/95203/D8POboZ3RxSmSrhSJzwX_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202013-08-29%20%E4%B8%8B%E5%8D%881.24.33.png",
    
    "http://blog.frost.tw/icon-512.png"
  ],
  "datePublished": "2013-08-28T20:39:00.000Z",
  "dateModified": "2017-07-02T17:07:07.000Z",
  "description":"昨天在 TEDxTaipei 實習的時候說要修正之前 Timer (計時器) 的錯誤，我馬上就想到可以用 Facebook 的 React 來改寫。之前就非常想玩看看，這次完了之後發現確實不錯，可以來推一下 XDD註：暑假剛好有機會在 TEDxTaipei 實習，主要處理 WordPress 後端一些 PHP Code 和一些與前端搭配的技術，而計時器在 TEDxTaipei 會自行製作是因為有多了幾個特殊的按鈕的關係。",
  "author": {
    "@type": "Person",
    "name": "蒼時弦也"
  },
  "publisher": {
    "@type": "Organization",
    "name": "蒼時弦也",
    "logo": {
      "@type": "ImageObject",
      "url": "http://blog.forst.tw/logo-wide.png"
    }
  }
}

</script>


  <link href="/icon-512.png" rel="icon">
  <link rel="alternate" href="/feed.xml" title="弦而時習之" type="application/rss+xml">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <script async src="/js/turbolinks.js"></script>
</head>

  <body>
    <header id="header">
      
<h1 id="sitename">
  <a href="/" class="hide-text logo--icon align-center">
  弦而時習之
  </a>
</h1>

<aside id="slogan" class="slogan align-center text-center">
  <h2 class="slogan__title">Aotokitsuruya</h2>
  <p class="slogan__description">The Web is attracting  me, so I start learning PHP, HTML, CSS and JavaScript. When I know about Ruby, I fall in love with it. Now, I working with my friend to design games using C++ and still learning web about Golang, Ruby and JavaScript. In the other side, I also be a designer, the reason why the web is attracted me.</p>
</aside>

    </header>
    <div id="wrapper">
      
<article class="post article">
  <header class="article__header">
    <time datetime="2013-08-28T20:39:00.000Z" class="article__time--header">
      Aug.29
    </time>
    
  
    <h1 class="article__title">React - Facebook 的 UI 元件 Library</h1>
  


  </header>
  <div class="article__entry">
    
    <p>昨天在 TEDxTaipei 實習的時候說要修正之前 Timer (計時器) 的錯誤，我馬上就想到可以用 Facebook 的 <a href="http://facebook.Github.io/react/" target="_blank" rel="noopener">React</a> 來改寫。</p>
<p>之前就非常想玩看看，這次完了之後發現確實不錯，可以來推一下 XDD</p>
<p>註：暑假剛好有機會在 TEDxTaipei 實習，主要處理 WordPress 後端一些 PHP Code 和一些與前端搭配的技術，而計時器在 TEDxTaipei 會自行製作是因為有多了幾個特殊的按鈕的關係。</p>
<a id="more"></a>
<p><a href="http://facebook.Github.io/react/" target="_blank" rel="noopener">React</a> 是個怎樣的東西，可以在官網的簡介「A JAVASCRIPT LIBRARY FOR BUILDING USER INTERFACES」就很明確地瞭解，是用來做一些 UI 的元件。</p>
<p>說實在的，概念其實很簡單。</p>
<ul>
<li>以類似 DOM 物件的方式描述</li>
<li>每個元件都是狀態機</li>
<li>能以 XML Like 的方式描述（JSX 功能）</li>
<li>樹狀的</li>
</ul>
<p>在使用 <a href="http://facebook.Github.io/react/" target="_blank" rel="noopener">React</a> 上的概念非常的簡單：</p>
<ol>
<li>建立元件（ React.createClass ）</li>
<li>定義行為 ( render / componentWillMount …)</li>
<li>組合元件 ( A 元件下的 render 傳回的是一組 B 元件 )</li>
<li>渲染元件 ( React.renderComponent( parentComponent, target ) )</li>
</ol>
<p>我們透過建立一個「元件」來描述外觀 Ex. 內容放在一個 div 之中，然後有著叫做 label 的 className ( 因為是以 JS 撰寫，所以這些屬性都是用 JS 的方式來設定 )<br>接著渲染 ( render ) 這個元件，在某一個 DOM 的物件上 Ex. document.body</p>
<p>下面是以 CoffeeScript 所撰寫的 Hello World 版本，因為使用 CoffeeScript 因此和 JSX 不相容。<br>不過仍能運作的關係是因為 JSX 算是輔助，只要在撰寫時使用「編譯後」的方式呈現即可（ <a href="http://facebook.Github.io/react/jsx-compiler.html" target="_blank" rel="noopener">JSX Live Compiler</a> 有興趣可以嘗試看看 ）</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">HelloWorld = React.createClass &#123;</div><div class="line">    render: <span class="function">-&gt;</span> </div><div class="line">        (</div><div class="line">            React.DOM.div &#123;&#125;, [</div><div class="line">                <span class="string">"Hello "</span>,</div><div class="line">                React.DOM.div &#123;className: <span class="string">'label label-info'</span>&#125;, @props.name</div><div class="line">            ]</div><div class="line">        )</div><div class="line">&#125;</div><div class="line"></div><div class="line">React.renderComponent (HelloWorld &#123;name: <span class="string">"World"</span>&#125;), <span class="built_in">document</span>.body</div></pre></td></tr></table></figure>
<p>Live Demo: <a href="http://jsfiddle.net/elct9620/TPHpS/" target="_blank" rel="noopener">http://jsfiddle.net/elct9620/TPHpS/</a></p>
<hr>
<p>事實上，一開始我以為 <a href="http://facebook.Github.io/react/" target="_blank" rel="noopener">React</a> 有著複雜或者非常詳盡的概念（因為我覺得他和 AngularJS 建立界面有點類似的感覺）</p>
<p>不過事實上其實非常精簡而且簡潔的，這邊先來討論他 DOM Like 的部分。</p>
<p><img src="http://user-image.logdown.io/user/52/blog/52/post/95203/D8POboZ3RxSmSrhSJzwX_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202013-08-29%20%E4%B8%8B%E5%8D%881.24.33.png" alt="螢幕快照 2013-08-29 下午1.24.33.png"></p>
<p>從上圖來看，我們使用 <a href="http://facebook.Github.io/react/" target="_blank" rel="noopener">React</a> 裡面的 DOM 物件產生的 div 物件，或者是自行利用 createClass 產生的 DOM Like 物件（用這種方式稱呼似乎比較好理解），都是同一個類型物件下的產物，差別只在於原本的 DOM 物件沒有 state (狀態) 的屬性，這也是為什麼在 JSX 下會使用 &lt;Hello name=”World” /&gt; 的方式撰寫的原因。</p>
<p>因為 React 先把全部的 DOM 和你用 <a href="http://facebook.Github.io/react/" target="_blank" rel="noopener">React</a> 產生的 DOM Like 物件都先抽象化，就個人感覺來說，他讓我不需要寫非常多 inline HTML code 在 JS 裡面，而是純粹的 JS 讓程式碼變得乾淨許多。</p>
<p>假設希望取得原本的 DOM 物件呢？只要對產生出來的物件使用 <code>getDOMNode()</code> 方法即可（通常用於 addEventListener 等綁定事件上）</p>
<p>註：昨天測試似乎無法直接加上 onClick 綁定事件，也許待會會成功</p>
<hr>
<p>接下來就是 State (狀態) 的問題。</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&#123;button&#125; = React.DOM</div><div class="line"></div><div class="line">Button = React.createClass &#123;</div><div class="line">    getInitialState: <span class="function">-&gt;</span></div><div class="line">        &#123;btnClass: <span class="string">'btn-default'</span>&#125;</div><div class="line">        </div><div class="line">    handleClick: <span class="function"><span class="params">(event)</span>-&gt;</span></div><div class="line">        newClass = <span class="keyword">if</span> @state.btnClass <span class="keyword">is</span> <span class="string">'btn-success'</span> <span class="keyword">then</span> <span class="string">'btn-default'</span> <span class="keyword">else</span> <span class="string">'btn-success'</span></div><div class="line">        @setState &#123;btnClass: newClass&#125;</div><div class="line">        </div><div class="line">    render: <span class="function">-&gt;</span></div><div class="line">        @label = <span class="keyword">if</span> @state.btnClass <span class="keyword">is</span> <span class="string">'btn-success'</span> <span class="keyword">then</span> <span class="string">'Success!'</span> <span class="keyword">else</span> <span class="string">'Start'</span></div><div class="line">        (</div><div class="line">            button &#123;className: <span class="string">"btn <span class="subst">#&#123;@state.btnClass&#125;</span>"</span>, onClick: @handleClick&#125;, @label </div><div class="line">        )</div><div class="line">&#125;</div><div class="line"></div><div class="line">React.renderComponent (Button &#123;&#125;), <span class="built_in">document</span>.body</div></pre></td></tr></table></figure>
<p>Live Demo: <a href="http://jsfiddle.net/elct9620/cecjs/" target="_blank" rel="noopener">http://jsfiddle.net/elct9620/cecjs/</a></p>
<p>這個範例我建立了一個叫做 Button 的物件，他會渲染出一個 HTML 的 button 元素，而上面套用的 class 樣式以及 Label 則會受到名為 btnClass 狀態的影響而產生改變。</p>
<p>如果仔細看的話，會注意到裡面完全沒有對 UI 作出重新渲染（ 呼叫 render() ）的動作，但是界面卻自動的產生改變。<br>因此我們不需要關心「渲染」的問題，只要專注在於一個 UI 的設計。</p>
<p>註：不知道為什麼 onClick 可以用了（感動）他似乎會自動做好 addEventListener 和 removerEventListener 超貼心，我推測 onXXX 的都是這樣使用，官網也有用到 onChange 的屬性。</p>
<hr>
<p>至於屬性部分，操作起來和 State 基本上是一樣的。<br>（也可以透過 setProps 方法改變物件屬性，進而觸發重新 render 主要就看設計。）</p>
<hr>
<p>再來是關於表單地強化功能。</p>
<p>假設我現在需要取得元件內某個欄位的數值該怎麼辦呢？</p>
<p>這時候可以借助對表單元素設置 ref 元素來輔助。</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&#123;input, div, span&#125; = React.DOM</div><div class="line"></div><div class="line">Nickname = React.createClass &#123;</div><div class="line">    getInitialState: <span class="function">-&gt;</span></div><div class="line">        &#123;nickname: @props.nickname&#125;</div><div class="line">    handleChange: <span class="function"><span class="params">(event)</span>-&gt;</span></div><div class="line">        @setState &#123;nickname: @refs.nickname.getDOMNode().value.trim()&#125;</div><div class="line">    render: <span class="function">-&gt;</span></div><div class="line">        (</div><div class="line">            div &#123;&#125;, [</div><div class="line">                input &#123;ref: <span class="string">'nickname'</span>, className: <span class="string">'form-control'</span>, onChange: @handleChange&#125;,</div><div class="line">                div &#123;&#125;, [</div><div class="line">                    span &#123;className: <span class="string">'label label-success'</span>&#125;, <span class="string">'Nickname'</span></div><div class="line">                ],</div><div class="line">                <span class="string">" : "</span></div><div class="line">                ,</div><div class="line">                @state.nickname</div><div class="line">            ]</div><div class="line">        )</div><div class="line">&#125;</div><div class="line"></div><div class="line">React.renderComponent (Nickname &#123;nickname: <span class="string">"Wade"</span>&#125;), <span class="built_in">document</span>.body</div></pre></td></tr></table></figure>
<p>Live Demo: <a href="http://jsfiddle.net/elct9620/ZrHy8/" target="_blank" rel="noopener">http://jsfiddle.net/elct9620/ZrHy8/</a></p>
<p>在這段 Code 可以看到我對 input 設定了一個 ref 屬性，並且能夠在 onChange 事件發生時透過 @refs 來讀取對應的元素。</p>
<p>註：在 <a href="http://facebook.Github.io/react/" target="_blank" rel="noopener">React</a> 中支援 trim() 協助清除空白，這邊嘗試使用 props 但是會發生錯誤，因此建議 props 只適合在初始化時使用</p>
<hr>
<p><img src="http://user-image.logdown.io/user/52/blog/52/post/95203/tuVxapuNTMOL2l3cAYE8_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202013-08-29%20%E4%B8%8B%E5%8D%882.25.26.png" alt="螢幕快照 2013-08-29 下午2.25.26.png"></p>
<p>那麼 <a href="http://facebook.Github.io/react/" target="_blank" rel="noopener">React</a> 適合被使用嗎？這是我在 Facebook 留言區塊發現的程式碼，每個使用 <a href="http://facebook.Github.io/react/" target="_blank" rel="noopener">React</a> 產生的元素都會有一個叫做 data-reactid 的屬性，用來辨識。</p>
<p>所以，趕緊來試玩看看吧！使用起來其實也非常順暢。</p>

    
    <footer class="article__footer">
      
        <p align="center">
          <a href='https://ko-fi.com/J3J78093' target='_blank'>
            <img height='36' style='border:0px;height:36px;' src='https://az743702.vo.msecnd.net/cdn/kofi5.png?v=0' border='0' alt='Buy Me a Coffee at ko-fi.com' />
          </a>
        </p>
      
    </footer>
  </div>
</article>


  
    <div class="adv">
      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <!-- 網誌_文末廣告 (Hexo) -->
      <ins class="adsbygoogle"
      style="display:block"
      data-ad-client="ca-pub-2844969736316510"
      data-ad-slot="5530952976"
      data-ad-format="auto"></ins>
      <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
  

  
<section id="comment" class="comment-box">
  <h1 class="comment-box__title">留言</h1>

  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></noscript>
  </div>
</section>






    </div>
    <footer id="footer">
      <div id="copyright">
  &copy;2013 <a href="https://plus.google.com/117236344655673213049?rel=author" target="_blank">蒼時弦也</a>. All right reversed.
</div>

    </footer>
    

  
  <script type="text/javascript">
  var disqus_shortname = 'revo-skill-frost';

  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  }());
  </script>
  

  
  <!-- Google Tag Manager -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5TQLRN"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5TQLRN');</script>
  <!-- End Google Tag Manager -->
  

  <script src="/js/app.js"></script>


    <div class="loading"></div>
  </body>
</html>
