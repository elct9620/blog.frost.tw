<!doctype html><html lang=zh-tw><head><title>Ruby 中 Constant 和 Class 的關係 - 弦而時習之</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=description content="下班前龍哥說在 Mailing List 看到了一段 Code 很有趣。
1 2 3 4 5 6 7 8 9 10  a = Class.new p a #=&amp;gt; #&amp;lt;Class:0x0000558d34f68b48&amp;gt; p a.name #=&amp;gt; nil B = a p a …"><meta name=created content="2019-06-18T00:00:00+0000"><meta name=modified content="2019-06-18T19:13:17+0000"><meta name=author content="蒼時弦也"><meta property="og:site_name" content="弦而時習之"><meta property="og:title" content="Ruby 中 Constant 和 Class 的關係"><meta property="og:url" content="https://blog.frost.tw/posts/2019/06/18/The-relationship-between-constant-and-class-in-ruby/"><meta property="og:type" content="article"><meta property="og:image" content="https://blog.frost.tw/images/2019-06-18-the-relationship-between-constant-and-class-in-ruby/thumbnail.png"><meta name=theme-color content="#EFEFEF"><link href=https://blog.frost.tw/icon-512.png rel=icon><link rel=canonical href=https://blog.frost.tw/posts/2019/06/18/The-relationship-between-constant-and-class-in-ruby/><script type=application/ld+json>[{"@context":"https://schema.org","@type":"WebPage","headline":"Ruby 中 Constant 和 Class 的關係","datePublished":"2019-06-18T19:13:17Z","dateModified":"2019-06-18T19:13:17Z","url":"https://blog.frost.tw/posts/2019/06/18/The-relationship-between-constant-and-class-in-ruby/","description":"下班前龍哥說在 Mailing List 看到了一段 Code 很有趣。\n1 2 3 4 5 6 7 8 9 10  a = Class.new p a #=\u0026gt; #\u0026lt;Class:0x0000558d34f68b48\u0026gt; p a.name #=\u0026gt; nil B = a p a …","keywords":["Ruby","筆記","C"],"image":"https://blog.frost.tw/images/2019-06-18-the-relationship-between-constant-and-class-in-ruby/thumbnail.png","author":{"@type":"Person","name":"蒼時弦也"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.frost.tw/"},"publisher":{"@type":"Organization","name":"弦而時習之","url":"https://blog.frost.tw/"}},{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://blog.frost.tw/","name":"弦而時習之","image":"http://blog.frost.tw/icon-512.png"}},{"@type":"ListItem","position":2,"item":{"@id":"https://blog.frost.tw/posts/2019/06/18/The-relationship-between-constant-and-class-in-ruby/","name":"Ruby 中 Constant 和 Class 的關係","image":"https://blog.frost.tw/images/2019-06-18-the-relationship-between-constant-and-class-in-ruby/thumbnail.png"}}]}]</script><script async src=/js/turbolinks.min.js></script></head><body><div id=fb-root data-turbolinks-permanent></div><h1 id=sitename><a href=/ class="hide-text logo--icon align-center">弦而時習之</a></h1><aside id=slogan class="slogan align-center text-center"><h2 class=slogan__title>Aotokitsuruya</h2><p class=slogan__description>The Web is attracting me, so I start learning PHP, HTML, CSS and JavaScript. When I know about Ruby, I fall in love with it. Now, I working with my friend to design games using C++ and still learning web about Golang, Ruby and JavaScript. In the other side, I also be a designer, the reason why the web is attracted me.</p></aside><div id=wrapper><article class="post article" role=article><header class=article__header><time datetime=2019-06-18T19:13:17+0000 class=article__time--header>Feb.18</time><h1 class=article__title>Ruby 中 Constant 和 Class 的關係</h1></header><div class=article__entry><nav class=translation></nav><p>下班前<a href=https://kaochenlong.com/>龍哥</a>說在 Mailing List 看到了一段 Code 很有趣。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-ruby data-lang=ruby><span class=n>a</span> <span class=o>=</span> <span class=no>Class</span><span class=o>.</span><span class=n>new</span>

<span class=nb>p</span> <span class=n>a</span>        <span class=c1>#=&gt; #&lt;Class:0x0000558d34f68b48&gt;</span>
<span class=nb>p</span> <span class=n>a</span><span class=o>.</span><span class=n>name</span>   <span class=c1>#=&gt; nil</span>

<span class=n>B</span> <span class=o>=</span> <span class=n>a</span>
<span class=nb>p</span> <span class=n>a</span><span class=o>.</span><span class=n>name</span>   <span class=c1>#=&gt; &#39;B&#39;</span>

<span class=n>C</span> <span class=o>=</span> <span class=n>a</span>
<span class=nb>p</span> <span class=n>C</span><span class=o>.</span><span class=n>name</span>   <span class=c1>#=&gt; &#39;B&#39;</span>
</code></pre></td></tr></table></div></div><p>裡面 <code>C = a</code> 到底發生了什麼事情，是很值得討論的，因為有了線索是 <code>rb_const_set</code> 可以找到原因，所以就利用下班時間來讀看看這段。</p><blockquote><p>關於前面的用法可以參考之前寫過的<a href=https://blog.frost.tw/posts/2017/10/22/The-ruby-s-class-is-free-Part-1/>自由的 Ruby 類別</a>來了解原因。</p></blockquote><p>我大致上翻了一下 Ruby 的原始碼，這段程式主要是定義在 <code>variable.c</code> 這個檔案，在 Ruby 裡面我們可以簡單把 Constant（常數）理解為一種特殊的變數，跟一些語言在使用了 <code>const</code> 關鍵字後無法更改的概念上是不太一樣。</p><h2 id=常數如何被賦值>常數如何被賦值</h2><p>因為 <code>rb_const_set</code> 接受了一些參數我們不好理解，所以先看看是由誰來呼叫他。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-c data-lang=c><span class=kt>void</span>
<span class=nf>rb_define_const</span><span class=p>(</span><span class=n>VALUE</span> <span class=n>klass</span><span class=p>,</span> <span class=k>const</span> <span class=kt>char</span> <span class=o>*</span><span class=n>name</span><span class=p>,</span> <span class=n>VALUE</span> <span class=n>val</span><span class=p>)</span>
<span class=p>{</span>
    <span class=n>ID</span> <span class=n>id</span> <span class=o>=</span> <span class=n>rb_intern</span><span class=p>(</span><span class=n>name</span><span class=p>);</span>

    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>rb_is_const_id</span><span class=p>(</span><span class=n>id</span><span class=p>))</span> <span class=p>{</span>
	      <span class=n>rb_warn</span><span class=p>(</span><span class=s>&#34;rb_define_const: invalid name `%s&#39; for constant&#34;</span><span class=p>,</span> <span class=n>name</span><span class=p>);</span>
    <span class=p>}</span>
    <span class=n>rb_const_set</span><span class=p>(</span><span class=n>klass</span><span class=p>,</span> <span class=n>id</span><span class=p>,</span> <span class=n>val</span><span class=p>);</span>
<span class=p>}</span>

<span class=kt>void</span>
<span class=nf>rb_define_global_const</span><span class=p>(</span><span class=k>const</span> <span class=kt>char</span> <span class=o>*</span><span class=n>name</span><span class=p>,</span> <span class=n>VALUE</span> <span class=n>val</span><span class=p>)</span>
<span class=p>{</span>
    <span class=n>rb_define_const</span><span class=p>(</span><span class=n>rb_cObject</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>val</span><span class=p>);</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p>在 Ruby 裡面我們要定義一個常數 <code>A = x</code> 是透過 <code>rb_define_const</code> 來實現的，如果是 Global 的話，就會直接定義在 <code>Object</code> 下面，而我們提供給 <code>rb_const_set</code> 的三個參數裡面 <code>ID</code> 這個數值可以先來看一下 <code>rb_intern</code> 的用法。</p><p>現在我們在 Ruby 裡面會經常使用 <code>:name</code> 這樣的寫法，表示他是一種 Symbol 而在 Ruby 裡面的實作，都會透過 <code>rb_intern</code> 這個方法來從 <code>char*</code> 轉換過去，基本上我們可以理解 Ruby 所有物件、常數的命名，都會被統一記錄起來，方便之後重複使用。</p><p>不過這邊有趣的地方其實是他會檢查這個 <code>ID</code> 類型，往下追之後會看到像這樣的檢查</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-c data-lang=c><span class=cp>#define is_const_id(id) (id_type(id)==ID_CONST)
</span></code></pre></td></tr></table></div></div><blockquote><p>不過關於這段稍微追了下發現又是一個有點長的過程，這邊簡單解釋就是在定義 Symbol 的時候 Ruby 會依照這個 Symbol 的特性去區分出他的類型，像是 <code>$</code> 開頭會標記成 Golbal Variable 這樣的感覺</p></blockquote><h2 id=常數賦值的過程>常數賦值的過程</h2><p>接下來我們就可以往 <code>rb_const_set</code> 深入來看，因為整體是相對長的，我們就針對需要的部份重點式的閱讀。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-c data-lang=c>    <span class=n>rb_const_entry_t</span> <span class=o>*</span><span class=n>ce</span><span class=p>;</span>
    <span class=k>struct</span> <span class=n>rb_id_table</span> <span class=o>*</span><span class=n>tbl</span> <span class=o>=</span> <span class=n>RCLASS_CONST_TBL</span><span class=p>(</span><span class=n>klass</span><span class=p>);</span>

    <span class=k>if</span> <span class=p>(</span><span class=n>NIL_P</span><span class=p>(</span><span class=n>klass</span><span class=p>))</span> <span class=p>{</span>
	    <span class=n>rb_raise</span><span class=p>(</span><span class=n>rb_eTypeError</span><span class=p>,</span> <span class=s>&#34;no class/module to define constant %&#34;</span><span class=n>PRIsVALUE</span><span class=s>&#34;&#34;</span><span class=p>,</span> <span class=n>QUOTE_ID</span><span class=p>(</span><span class=n>id</span><span class=p>));</span>
    <span class=p>}</span>

    <span class=n>check_before_mod_set</span><span class=p>(</span><span class=n>klass</span><span class=p>,</span> <span class=n>id</span><span class=p>,</span> <span class=n>val</span><span class=p>,</span> <span class=s>&#34;constant&#34;</span><span class=p>);</span>
    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>tbl</span><span class=p>)</span> <span class=p>{</span>
      <span class=c1>// PART1
</span><span class=c1></span>    <span class=p>}</span>
    <span class=k>else</span> <span class=p>{</span>
      <span class=c1>// PART2
</span><span class=c1></span>    <span class=p>}</span>
</code></pre></td></tr></table></div></div><p>第一階段 Ruby 會先去看看這個 Class 裡面是不是已經初始化過紀錄下面所屬的常數的一個表格，如果沒有的話就初始化一個出來。已經存在的話則是做 Autoload 動作，如果有讀取到對應的常數，那就會跳出錯誤警告，沒有的話就跟前面產生表的行為一樣，把這個常數插入進去。</p><p>看起來常數的賦值應該就這樣結束了，不過為了處理一些特殊情況，所以往下會看到一段註解。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-c data-lang=c>    <span class=cm>/*
</span><span class=cm>     * Resolve and cache class name immediately to resolve ambiguity
</span><span class=cm>     * and avoid order-dependency on const_tbl
</span><span class=cm>     */</span>
</code></pre></td></tr></table></div></div><p>這就是我們這次要討論的問題來源，要觸發這個處理依照原始碼的實作要滿足某些條件才行。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-c data-lang=c><span class=k>if</span> <span class=p>(</span><span class=n>rb_cObject</span> <span class=o>&amp;&amp;</span> <span class=p>(</span><span class=n>RB_TYPE_P</span><span class=p>(</span><span class=n>val</span><span class=p>,</span> <span class=n>T_MODULE</span><span class=p>)</span> <span class=o>||</span> <span class=n>RB_TYPE_P</span><span class=p>(</span><span class=n>val</span><span class=p>,</span> <span class=n>T_CLASS</span><span class=p>)))</span> <span class=p>{</span>
</code></pre></td></tr></table></div></div><ol><li><code>Object</code> 是有被定義的（正常情況下都應該是被定義的）</li><li>賦予的數值必須是 Module 或者 Class</li></ol><p>接下來要再滿足另一個條件，就是通過 <code>rb_class_path_cached</code> 的檢查</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-c data-lang=c><span class=k>if</span> <span class=p>(</span><span class=n>NIL_P</span><span class=p>(</span><span class=n>rb_class_path_cached</span><span class=p>(</span><span class=n>val</span><span class=p>)))</span> <span class=p>{</span>
</code></pre></td></tr></table></div></div><p>因為裡面的實作也有點多，所以這邊直接去找了一下<a href=https://docs.ruby-lang.org/ja/latest/function/rb_class_path.html>文件</a>關於 <code>rb_class_path</code> 的用途，然後再去看 <code>rb_class_path_cached</code> 的這段實作。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-c data-lang=c><span class=n>VALUE</span>
<span class=nf>rb_class_path_cached</span><span class=p>(</span><span class=n>VALUE</span> <span class=n>klass</span><span class=p>)</span>
<span class=p>{</span>
    <span class=n>st_table</span> <span class=o>*</span><span class=n>ivtbl</span><span class=p>;</span>
    <span class=n>st_data_t</span> <span class=n>n</span><span class=p>;</span>

    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>RCLASS_EXT</span><span class=p>(</span><span class=n>klass</span><span class=p>))</span> <span class=k>return</span> <span class=n>Qnil</span><span class=p>;</span>
    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=p>(</span><span class=n>ivtbl</span> <span class=o>=</span> <span class=n>RCLASS_IV_TBL</span><span class=p>(</span><span class=n>klass</span><span class=p>)))</span> <span class=k>return</span> <span class=n>Qnil</span><span class=p>;</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>st_lookup</span><span class=p>(</span><span class=n>ivtbl</span><span class=p>,</span> <span class=p>(</span><span class=n>st_data_t</span><span class=p>)</span><span class=n>classpath</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>n</span><span class=p>))</span> <span class=k>return</span> <span class=p>(</span><span class=n>VALUE</span><span class=p>)</span><span class=n>n</span><span class=p>;</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>st_lookup</span><span class=p>(</span><span class=n>ivtbl</span><span class=p>,</span> <span class=p>(</span><span class=n>st_data_t</span><span class=p>)</span><span class=n>tmp_classpath</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>n</span><span class=p>))</span> <span class=k>return</span> <span class=p>(</span><span class=n>VALUE</span><span class=p>)</span><span class=n>n</span><span class=p>;</span>
    <span class=k>return</span> <span class=n>Qnil</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p>大致上我們可以理解成每個有名字的 Class 或 Module 都會被記錄起來，所以這邊要找的條件是「匿名的 Class 或是 Module」都符合條件後，就會做下面的動作。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-c data-lang=c>  <span class=k>if</span> <span class=p>(</span><span class=n>klass</span> <span class=o>==</span> <span class=n>rb_cObject</span><span class=p>)</span> <span class=p>{</span>
	  <span class=n>rb_ivar_set</span><span class=p>(</span><span class=n>val</span><span class=p>,</span> <span class=n>classpath</span><span class=p>,</span> <span class=n>rb_id2str</span><span class=p>(</span><span class=n>id</span><span class=p>));</span>
	  <span class=n>rb_name_class</span><span class=p>(</span><span class=n>val</span><span class=p>,</span> <span class=n>id</span><span class=p>);</span>
  <span class=p>}</span>
  <span class=k>else</span> <span class=p>{</span>
		<span class=n>VALUE</span> <span class=n>path</span><span class=p>;</span>
		<span class=n>ID</span> <span class=n>pathid</span><span class=p>;</span>
		<span class=n>st_data_t</span> <span class=n>n</span><span class=p>;</span>
		<span class=n>st_table</span> <span class=o>*</span><span class=n>ivtbl</span> <span class=o>=</span> <span class=n>RCLASS_IV_TBL</span><span class=p>(</span><span class=n>klass</span><span class=p>);</span>
		<span class=k>if</span> <span class=p>(</span><span class=n>ivtbl</span> <span class=o>&amp;&amp;</span>
		    <span class=p>(</span><span class=n>st_lookup</span><span class=p>(</span><span class=n>ivtbl</span><span class=p>,</span> <span class=p>(</span><span class=n>st_data_t</span><span class=p>)(</span><span class=n>pathid</span> <span class=o>=</span> <span class=n>classpath</span><span class=p>),</span> <span class=o>&amp;</span><span class=n>n</span><span class=p>)</span> <span class=o>||</span>
		     <span class=n>st_lookup</span><span class=p>(</span><span class=n>ivtbl</span><span class=p>,</span> <span class=p>(</span><span class=n>st_data_t</span><span class=p>)(</span><span class=n>pathid</span> <span class=o>=</span> <span class=n>tmp_classpath</span><span class=p>),</span> <span class=o>&amp;</span><span class=n>n</span><span class=p>)))</span> <span class=p>{</span>
		    <span class=n>path</span> <span class=o>=</span> <span class=n>rb_str_dup</span><span class=p>((</span><span class=n>VALUE</span><span class=p>)</span><span class=n>n</span><span class=p>);</span>
		    <span class=n>rb_str_append</span><span class=p>(</span><span class=n>rb_str_cat2</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=s>&#34;::&#34;</span><span class=p>),</span> <span class=n>rb_id2str</span><span class=p>(</span><span class=n>id</span><span class=p>));</span>
		    <span class=n>OBJ_FREEZE</span><span class=p>(</span><span class=n>path</span><span class=p>);</span>
		    <span class=n>rb_ivar_set</span><span class=p>(</span><span class=n>val</span><span class=p>,</span> <span class=n>pathid</span><span class=p>,</span> <span class=n>path</span><span class=p>);</span>
		    <span class=n>rb_name_class</span><span class=p>(</span><span class=n>val</span><span class=p>,</span> <span class=n>id</span><span class=p>);</span>
		<span class=p>}</span>
  <span class=p>}</span>
</code></pre></td></tr></table></div></div><p>假設這個常數是定義在 <code>Object</code>（全域）的情況，那麼就直接對他做兩件事情：</p><ol><li>設定 <code>classpath</code> （就是前面的暫存檢查）</li><li>對這個匿名的 Class 或 Module 設定名字為當下的常數</li></ol><p>如果是定義在某個 Class 或 Module 下面的話，因為 <code>classpath</code> 就不會是剛好的，所以要先算過（產生） <code>classpath</code> 然後再做一樣的事情。</p><h2 id=總結>總結</h2><p>找完之後我們就可以解釋為什麼文章一開始的 <code>C = a</code> 再去問 <code>C.name</code> 會得到 <code>B</code> 這個結果了，主要是因為已經被命名過的 Class 會在記憶體中製作一個類似捷徑的東西，讓下次去呼叫這個 Class 或 Module 可以更快。</p><p>而給這個 Class 或 Module 物件命名的時機點，就在於它被記錄到捷徑的時機，所以即使再次賦予給其他常數，也不會改變他的名字。</p><blockquote><p>這樣我們可以延伸出來的問題是 <code>C = a</code> 的情況下，因為 <code>classpath</code> 是 Cache 在 <code>B</code> 上面，這時候使用 <code>C</code> 是不是會比 <code>B</code> 更慢呢？而匿名的 Class 和 Module 會不會對效能有所影響。</p></blockquote><footer class=article__footer><div class=text-center><div class=fb-share-button data-href="<%- page.permalink %>" data-layout=button_count></div></div><div class="text-center mt-1"><style>.bmc-button img{width:27px!important;margin-bottom:1px!important;box-shadow:none!important;border:none!important;vertical-align:middle!important}.bmc-button{line-height:36px!important;height:37px!important;text-decoration:none!important;display:inline-flex!important;color:#fff!important;background-color:#000!important;border-radius:3px!important;border:1px solid transparent!important;padding:1px 9px!important;font-size:22px!important;letter-spacing:.6px!important;box-shadow:0 1px 2px rgba(190,190,190,.5)!important;-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;margin:0 auto!important;font-family:cookie,cursive!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;-o-transition:.3s all linear!important;-webkit-transition:.3s all linear!important;-moz-transition:.3s all linear!important;-ms-transition:.3s all linear!important;transition:.3s all linear!important}.bmc-button:hover,.bmc-button:active,.bmc-button:focus{-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;text-decoration:none!important;box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;opacity:.85!important;color:#fff!important}</style><link href="https://fonts.googleapis.com/css?family=Cookie&display=swap" rel=stylesheet><a class=bmc-button target=_blank href=https://www.buymeacoffee.com/aotoki><img src=https://bmc-cdn.nyc3.digitaloceanspaces.com/BMC-button-images/BMC-btn-logo.svg rel=noreferrer alt="Buy me a Coffee"><span style=margin-left:5px>Buy me a Coffee</span></a></div><iframe title=LikeCoin scrolling=no frameborder=0 style="display:block;margin:0 auto;height:212px" src="https://button.like.co/in/embed/elct9620/button?referrer=<%- page.permalink %>"></iframe><ul class=article__tag-list><li class=article__tag-list-item><a class=article__tag-list-link href=https://blog.frost.tw/tags/Ruby/>Ruby</a></li><li class=article__tag-list-item><a class=article__tag-list-link href=https://blog.frost.tw/tags/%E7%AD%86%E8%A8%98/>筆記</a></li><li class=article__tag-list-item><a class=article__tag-list-link href=https://blog.frost.tw/tags/C/>C</a></li></ul></footer><aside class=related><header class=related__header><h3 class=related__title>相關文章</h3></header><ul><li class=related__item><a class=related__link href=/posts/2019/01/14/Do-you-understand-the-Ruby-version-Taiwan-Consensus-on-5xruby-s-fanpage/>你看懂五倍紅寶石粉專上的 Ruby 版台灣共識了嗎？</a></li><li class=related__item><a class=related__link href=/posts/2018/10/09/Customize-a-linux-for-your-raspberrypi/>客製化你樹莓派上運行的 Linux</a></li><li class=related__item><a class=related__link href=/posts/2018/01/09/How-ruby-raise-an-error/>Ruby 中該如何 Raise 一個錯誤</a></li><li class=related__item><a class=related__link href=/posts/2014/03/24/capistrano-to-vagrant-automated-deployment-experience/>Capistrano to Vagrant 自動部署心得</a></li><li class=related__item><a class=related__link href=/posts/2014/09/04/mruby-in-csharp-the-tragedy-of-rpg-maker-1/>MRuby in C# - 因 RPG Maker 的慘劇（一）</a></li></ul></aside></div></article><div class=adv><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-2844969736316510 data-ad-slot=5530952976 data-ad-format=auto></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><section id=comment class=comment-box><h1 class=comment-box__title>留言</h1><div id=disqus_thread></div></div></section></div><footer id=footer><div id=copyright>&copy;2020 <a href="https://plus.google.com/117236344655673213049?rel=author" target=_blank rel=noreferrer>蒼時弦也</a>. All right reversed.</div></footer><link rel=stylesheet href=/css/styles.css><script src=/js/app.min.6e03bcf752b31ab875459fbdd360c766632ead24687ffe499c4cf1f86e9fe489.js></script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5TQLRN" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-5TQLRN');</script><script>window.fbAsyncInit=function(){FB.init({appId:'178355449110',xfbml:true,version:'v2.12'});FB.AppEvents.logPageView();};(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return;}
js=d.createElement(s);js.id=id;js.src="https://connect.facebook.net/zh_TW/sdk.js";js.async=true
js.defer=true
fjs.parentNode.insertBefore(js,fjs);}(document,'script','facebook-jssdk'));</script><div class=loading></div></body></html>